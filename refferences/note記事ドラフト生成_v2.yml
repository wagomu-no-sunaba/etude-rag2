app:
  description: "noteè¨˜äº‹ãƒ‰ãƒ©ãƒ•ãƒˆç”Ÿæˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ v2\n\nã€v2ã®ç‰¹å¾´ã€‘\n- è¨˜äº‹ã‚¿ã‚¤ãƒ—åˆ¥ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹å¯¾å¿œï¼ˆ4ç¨®é¡ï¼‰\n  - ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆ\n\
    \  - ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆ\n  - ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼\n  - ã‚«ãƒ«ãƒãƒ£ãƒ¼\n- ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸæœ€é©ãªéå»è¨˜äº‹æ¤œç´¢\n- æ–‡ä½“ãƒ»æ§‹æˆã®è‡ªå‹•åˆ†æã¨æ¨¡å€£\n- ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³æ¤œçŸ¥ã¨[è¦ç¢ºèª]ã‚¿ã‚°æŒ¿å…¥\n\
    \nã€å¯¾è±¡ã€‘\næ ªå¼ä¼šç¤¾ã‚®ã‚°ãƒ¼ æ¡ç”¨åºƒå ±noteè¨˜äº‹\n"
  icon: ğŸ¤–
  icon_background: '#DBEAFE'
  mode: advanced-chat
  name: noteè¨˜äº‹ãƒ‰ãƒ©ãƒ•ãƒˆç”Ÿæˆ_v2
  use_icon_as_answer_icon: true
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.2.7@9031bbf9b37d9f6341a20c78a8bd18d686afd3ff627545496c3557705419d084
    version: null
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/cohere:0.0.8@1456818eb78f25c1a25e91809cecbd78e5523d39868dcb78607e625913b5e4fe
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .TXT
      - .MD
      - .PDF
      - .DOCX
      allowed_file_types:
      - document
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: true
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 5
    opening_statement: 'ã“ã‚“ã«ã¡ã¯ï¼æ ªå¼ä¼šç¤¾ã‚®ã‚°ãƒ¼ã®noteè¨˜äº‹ãƒ‰ãƒ©ãƒ•ãƒˆç”ŸæˆAIã§ã™ã€‚


      ğŸ“ å¯¾å¿œã—ã¦ã„ã‚‹è¨˜äº‹ã‚¿ã‚¤ãƒ—ï¼š

      - ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆï¼ˆãŠçŸ¥ã‚‰ã›ãƒ»ãƒªãƒªãƒ¼ã‚¹ï¼‰

      - ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼ˆå‹‰å¼·ä¼šãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå ±å‘Šï¼‰

      - ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼ˆç¤¾å“¡ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼‰

      - ã‚«ãƒ«ãƒãƒ£ãƒ¼ï¼ˆä¼æ¥­æ–‡åŒ–ãƒ»åˆ¶åº¦ç´¹ä»‹ï¼‰


      ä»¥ä¸‹ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š

      - è¨˜äº‹ã®ãƒ†ãƒ¼ãƒãƒ»ä¸»æ—¨

      - ç®‡æ¡æ›¸ãã®ãƒ¡ãƒ¢

      - ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼å†…å®¹ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰

      - é–¢é€£ãƒ‡ãƒ¼ã‚¿ã‚„æ•°å€¤

      - ãã®ä»–ã®å‚è€ƒæƒ…å ±

      '
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
    - æ–°å…¥ç¤¾å“¡ã®ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜äº‹ã‚’æ›¸ããŸã„
    - ç¤¾å†…å‹‰å¼·ä¼šã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ãŸã„
    - ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯åˆ¶åº¦ã«ã¤ã„ã¦ç´¹ä»‹ã—ãŸã„
    - æ–°ã‚µãƒ¼ãƒ“ã‚¹ãƒªãƒªãƒ¼ã‚¹ã®ãŠçŸ¥ã‚‰ã›ã‚’æ›¸ããŸã„
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: llm
      id: start-to-input-parser
      source: node_start
      sourceHandle: source
      target: node_input_parser
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: input-parser-to-classifier
      source: node_input_parser
      sourceHandle: source
      target: node_article_classifier
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: classifier-to-type-router
      source: node_article_classifier
      sourceHandle: source
      target: node_type_router
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: router-to-query-announcement
      source: node_type_router
      sourceHandle: announcement
      target: node_query_gen_announcement
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: iteration
      id: query-to-search-announcement
      source: node_query_gen_announcement
      sourceHandle: source
      target: node_search_announcement
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: node_search_announcement
        sourceType: iteration-start
        targetType: knowledge-retrieval
      id: iter-start-to-kb-announcement
      source: node_search_announcement_start
      sourceHandle: source
      target: node_kb_announcement
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: iteration
        targetType: code
      id: search-announcement-to-merger
      source: node_search_announcement
      sourceHandle: source
      target: node_result_merger
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: router-to-query-event
      source: node_type_router
      sourceHandle: event_report
      target: node_query_gen_event
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: iteration
      id: query-to-search-event
      source: node_query_gen_event
      sourceHandle: source
      target: node_search_event
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: node_search_event
        sourceType: iteration-start
        targetType: knowledge-retrieval
      id: iter-start-to-kb-event
      source: node_search_event_start
      sourceHandle: source
      target: node_kb_event
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: iteration
        targetType: code
      id: search-event-to-merger
      source: node_search_event
      sourceHandle: source
      target: node_result_merger
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: router-to-query-interview
      source: node_type_router
      sourceHandle: interview
      target: node_query_gen_interview
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: iteration
      id: query-to-search-interview
      source: node_query_gen_interview
      sourceHandle: source
      target: node_search_interview
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: node_search_interview
        sourceType: iteration-start
        targetType: knowledge-retrieval
      id: iter-start-to-kb-interview
      source: node_search_interview_start
      sourceHandle: source
      target: node_kb_interview
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: iteration
        targetType: code
      id: search-interview-to-merger
      source: node_search_interview
      sourceHandle: source
      target: node_result_merger
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: router-to-query-culture
      source: node_type_router
      sourceHandle: culture
      target: node_query_gen_culture
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: iteration
      id: query-to-search-culture
      source: node_query_gen_culture
      sourceHandle: source
      target: node_search_culture
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: node_search_culture
        sourceType: iteration-start
        targetType: knowledge-retrieval
      id: iter-start-to-kb-culture
      source: node_search_culture_start
      sourceHandle: source
      target: node_kb_culture
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: iteration
        targetType: code
      id: search-culture-to-merger
      source: node_search_culture
      sourceHandle: source
      target: node_result_merger
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: llm
      id: result-merger-to-reranker
      source: node_result_merger
      sourceHandle: source
      target: node_reranker
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: reranker-to-style-analyzer
      source: node_reranker
      sourceHandle: source
      target: node_style_analyzer
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: reranker-to-structure-analyzer
      source: node_reranker
      sourceHandle: source
      target: node_structure_analyzer
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: style-analyzer-to-outline
      source: node_style_analyzer
      sourceHandle: source
      target: node_outline_generator
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: structure-analyzer-to-outline
      source: node_structure_analyzer
      sourceHandle: source
      target: node_outline_generator
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: outline-to-title
      source: node_outline_generator
      sourceHandle: source
      target: node_title_generator
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: outline-to-lead
      source: node_outline_generator
      sourceHandle: source
      target: node_lead_generator
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: iteration
      id: outline-to-body-iteration
      source: node_outline_generator
      sourceHandle: source
      target: node_body_iteration
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: node_body_iteration
        sourceType: iteration-start
        targetType: llm
      id: body-iter-start-to-section
      source: node_body_iteration_start
      sourceHandle: source
      target: node_section_generator
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: title-to-draft-assembler
      source: node_title_generator
      sourceHandle: source
      target: node_draft_assembler
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: lead-to-draft-assembler
      source: node_lead_generator
      sourceHandle: source
      target: node_draft_assembler
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: iteration
        targetType: code
      id: body-iteration-to-draft-assembler
      source: node_body_iteration
      sourceHandle: source
      target: node_draft_assembler
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: llm
      id: draft-assembler-to-closing
      source: node_draft_assembler
      sourceHandle: source
      target: node_closing_generator
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: closing-to-style-checker
      source: node_closing_generator
      sourceHandle: source
      target: node_style_checker
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: style-checker-to-hallucination
      source: node_style_checker
      sourceHandle: source
      target: node_hallucination_detector
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: hallucination-to-tag-inserter
      source: node_hallucination_detector
      sourceHandle: source
      target: node_tag_inserter
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: code
      id: tag-inserter-to-formatter
      source: node_tag_inserter
      sourceHandle: source
      target: node_draft_formatter
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: answer
      id: formatter-to-answer
      source: node_draft_formatter
      sourceHandle: source
      target: node_answer_output
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰è¨˜äº‹ç´ æã‚’å—ã‘å–ã‚‹é–‹å§‹ãƒãƒ¼ãƒ‰
        selected: false
        title: ç´ æå…¥åŠ›
        type: start
        variables: []
      height: 117
      id: node_start
      position:
        x: 0
        y: 500
      positionAbsolute:
        x: 0
        y: 500
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'æ•´ç†ã•ã‚Œã¦ã„ãªã„å…¥åŠ›ç´ æã‚’æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã—ã¾ã™ã€‚

          ãƒ†ãƒ¼ãƒã€ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆã€ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼å¼•ç”¨ã€æ•°å€¤ãƒ‡ãƒ¼ã‚¿ãªã©ã‚’æŠ½å‡ºã€‚

          '
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-input-parser
          role: system
          text: 'ã‚ãªãŸã¯å…¥åŠ›ç´ æã‚’æ§‹é€ åŒ–ã™ã‚‹ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰æä¾›ã•ã‚ŒãŸè¨˜äº‹ç´ æã‚’åˆ†æã—ã€æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã—ã¦ãã ã•ã„ã€‚


            ## æŠ½å‡ºé …ç›®

            1. theme: è¨˜äº‹ã®ãƒ†ãƒ¼ãƒãƒ»ä¸»æ—¨ï¼ˆ1æ–‡ã§è¦ç´„ï¼‰

            2. key_points: è¨˜äº‹ã«å«ã‚ã‚‹ã¹ãé‡è¦ãƒã‚¤ãƒ³ãƒˆï¼ˆç®‡æ¡æ›¸ãã‹ã‚‰æŠ½å‡ºï¼‰

            3. interview_quotes: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼å†…å®¹ï¼ˆãã®ã¾ã¾å¼•ç”¨å¯èƒ½ãªç™ºè¨€ï¼‰

            4. data_facts: å…·ä½“çš„ãªæ•°å€¤ã‚„ãƒ‡ãƒ¼ã‚¿

            5. people: ç™»å ´äººç‰©ï¼ˆåå‰ã€å½¹è·ï¼‰

            6. keywords: æ¤œç´¢ã«ä½¿ãˆã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆ5-10å€‹ï¼‰

            7. missing_info: è¨˜äº‹ä½œæˆã«ä¸è¶³ã—ã¦ã„ãã†ãªæƒ…å ±


            ## ãƒ«ãƒ¼ãƒ«

            - å…¥åŠ›ã«ãªã„æƒ…å ±ã¯æ¨æ¸¬ã—ãªã„

            - æ›–æ˜§ãªè¡¨ç¾ã¯ãã®ã¾ã¾ä¿æŒ

            - æ•°å€¤ã‚„å›ºæœ‰åè©ã¯æ­£ç¢ºã«æŠ½å‡º

            '
        - id: user-input
          role: user
          text: '## å…¥åŠ›ç´ æ

            {{#sys.query#}}


            ä¸Šè¨˜ã®ç´ æã‚’æ§‹é€ åŒ–ã—ã¦ãã ã•ã„ã€‚

            '
        selected: false
        structured_output:
          schema:
            $schema: http://json-schema.org/draft-07/schema#
            additionalProperties: false
            properties:
              data_facts:
                description: å…·ä½“çš„ãªæ•°å€¤ã‚„ãƒ‡ãƒ¼ã‚¿
                items:
                  type: string
                type: array
              interview_quotes:
                description: å¼•ç”¨å¯èƒ½ãªã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ç™ºè¨€
                items:
                  properties:
                    quote:
                      type: string
                    speaker:
                      type: string
                  type: object
                type: array
              key_points:
                description: è¨˜äº‹ã«å«ã‚ã‚‹ã¹ãé‡è¦ãƒã‚¤ãƒ³ãƒˆ
                items:
                  type: string
                type: array
              keywords:
                description: æ¤œç´¢ç”¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
                items:
                  type: string
                type: array
              missing_info:
                description: ä¸è¶³ã—ã¦ã„ã‚‹æƒ…å ±
                items:
                  type: string
                type: array
              people:
                description: ç™»å ´äººç‰©
                items:
                  properties:
                    name:
                      type: string
                    role:
                      type: string
                  type: object
                type: array
              theme:
                description: è¨˜äº‹ã®ãƒ†ãƒ¼ãƒãƒ»ä¸»æ—¨
                type: string
            required:
            - theme
            - key_points
            - keywords
            type: object
        structured_output_enabled: true
        title: ç´ ææ§‹é€ åŒ–
        type: llm
        vision:
          enabled: false
      height: 164
      id: node_input_parser
      position:
        x: 342
        y: 460
      positionAbsolute:
        x: 342
        y: 460
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'è¨˜äº‹ã®ç¨®é¡ã‚’4ã‚«ãƒ†ã‚´ãƒªã«åˆ†é¡ã—ã¾ã™ã€‚

          ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆã€ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆã€ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã€ã‚«ãƒ«ãƒãƒ£ãƒ¼ã€‚

          '
        model:
          completion_params:
            temperature: 0.1
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-classifier
          role: system
          text: "ã‚ãªãŸã¯è¨˜äº‹ã‚¿ã‚¤ãƒ—ã‚’åˆ†é¡ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚\n\n## ã‚¿ã‚¹ã‚¯\næ§‹é€ åŒ–ã•ã‚ŒãŸç´ æã‹ã‚‰ã€ä½œæˆã™ã¹ãè¨˜äº‹ã®ã‚¿ã‚¤ãƒ—ã‚’åˆ¤å®šã—ã¦ãã ã•ã„ã€‚\n\
            \n## è¨˜äº‹ã‚¿ã‚¤ãƒ—ï¼ˆ4ç¨®é¡ï¼‰\n\n1. ANNOUNCEMENTï¼ˆã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆï¼‰\n   - æ–°ã‚µãƒ¼ãƒ“ã‚¹ã€æ–°æ©Ÿèƒ½ã®ãƒªãƒªãƒ¼ã‚¹å‘ŠçŸ¥\n\
            \   - ä¼šç¤¾ã‹ã‚‰ã®é‡è¦ãªãŠçŸ¥ã‚‰ã›\n   - ãƒ—ãƒ¬ã‚¹ãƒªãƒªãƒ¼ã‚¹çš„ãªå†…å®¹\n   - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: ãƒªãƒªãƒ¼ã‚¹ã€ãŠçŸ¥ã‚‰ã›ã€é–‹å§‹ã€ç™ºè¡¨ã€ãƒ­ãƒ¼ãƒ³ãƒ\n\
            \n2. EVENT_REPORTï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼‰\n   - ç¤¾å†…å‹‰å¼·ä¼šã®å ±å‘Š\n   - å¤–éƒ¨ã‚¤ãƒ™ãƒ³ãƒˆå‚åŠ ãƒ¬ãƒãƒ¼ãƒˆ\n   - ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã€ã‚»ãƒŸãƒŠãƒ¼ã®æŒ¯ã‚Šè¿”ã‚Š\n\
            \   - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: å‹‰å¼·ä¼šã€ã‚¤ãƒ™ãƒ³ãƒˆã€ã‚»ãƒŸãƒŠãƒ¼ã€å‚åŠ ã€é–‹å‚¬ã€LT\n\n3. INTERVIEWï¼ˆã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼‰\n   - ç¤¾å“¡ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼\n\
            \   - å…¥ç¤¾ã‚¨ãƒ³ãƒˆãƒªã€é€€è·ã‚¨ãƒ³ãƒˆãƒª\n   - ç‰¹å®šã®äººç‰©ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸè¨˜äº‹\n   - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã€å…¥ç¤¾ã€ã€‡ã€‡ã•ã‚“ã€åƒãæ–¹ã€ã‚­ãƒ£ãƒªã‚¢\n\
            \n4. CULTUREï¼ˆã‚«ãƒ«ãƒãƒ£ãƒ¼ï¼‰\n   - ä¼æ¥­æ–‡åŒ–ã€ä¾¡å€¤è¦³ã®ç´¹ä»‹\n   - åˆ¶åº¦ç´¹ä»‹ï¼ˆãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã€ç¦åˆ©åšç”Ÿãªã©ï¼‰\n   -\
            \ ãƒãƒ¼ãƒ ãƒ»çµ„ç¹”ã®ç´¹ä»‹\n   - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: åˆ¶åº¦ã€æ–‡åŒ–ã€åƒãæ–¹ã€ãƒãƒ¼ãƒ ã€ç’°å¢ƒã€ç¦åˆ©åšç”Ÿ\n\n## ç´ ææƒ…å ±\nãƒ†ãƒ¼ãƒ: {{#node_input_parser.structured_output.theme#}}\n\
            ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ: {{#node_input_parser.structured_output.key_points#}}\nç™»å ´äººç‰©: {{#node_input_parser.structured_output.people#}}\n\
            ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{#node_input_parser.structured_output.keywords#}}\n\n## åˆ¤å®šãƒ«ãƒ¼ãƒ«\n\
            - è¿·ã£ãŸå ´åˆã¯ç´ æã®ä¸»ç›®çš„ã§åˆ¤å®š\n- è¤‡åˆçš„ãªå ´åˆã¯æœ€ã‚‚å¼·ã„è¦ç´ ã§åˆ¤å®š\n"
        - id: user-input-classifier
          role: user
          text: 'ä¸Šè¨˜ã®ç´ æã‹ã‚‰è¨˜äº‹ã‚¿ã‚¤ãƒ—ã‚’åˆ¤å®šã—ã¦ãã ã•ã„ã€‚

            '
        selected: false
        structured_output:
          schema:
            $schema: http://json-schema.org/draft-07/schema#
            additionalProperties: false
            properties:
              article_type:
                enum:
                - ANNOUNCEMENT
                - EVENT_REPORT
                - INTERVIEW
                - CULTURE
                type: string
              article_type_ja:
                description: æ—¥æœ¬èªã§ã®è¨˜äº‹ã‚¿ã‚¤ãƒ—å
                enum:
                - ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆ
                - ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆ
                - ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼
                - ã‚«ãƒ«ãƒãƒ£ãƒ¼
                type: string
              confidence:
                maximum: 1
                minimum: 0
                type: number
              reason:
                description: åˆ¤å®šç†ç”±
                type: string
              suggested_headings:
                description: æ¨å¥¨ã•ã‚Œã‚‹è¦‹å‡ºã—æ§‹æˆ
                items:
                  type: string
                maxItems: 4
                minItems: 2
                type: array
            required:
            - article_type
            - article_type_ja
            - confidence
            - suggested_headings
            type: object
        structured_output_enabled: true
        title: è¨˜äº‹ã‚¿ã‚¤ãƒ—åˆ†é¡
        type: llm
        vision:
          enabled: false
      height: 148
      id: node_article_classifier
      position:
        x: 684
        y: 460
      positionAbsolute:
        x: 684
        y: 460
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: announcement
          conditions:
          - comparison_operator: is
            id: condition-announcement
            value: ANNOUNCEMENT
            varType: string
            variable_selector:
            - node_article_classifier
            - structured_output
            - article_type
          id: announcement
          logical_operator: and
        - case_id: event_report
          conditions:
          - comparison_operator: is
            id: condition-event
            value: EVENT_REPORT
            varType: string
            variable_selector:
            - node_article_classifier
            - structured_output
            - article_type
          id: event_report
          logical_operator: and
        - case_id: interview
          conditions:
          - comparison_operator: is
            id: condition-interview
            value: INTERVIEW
            varType: string
            variable_selector:
            - node_article_classifier
            - structured_output
            - article_type
          id: interview
          logical_operator: and
        - case_id: culture
          conditions:
          - comparison_operator: is
            id: condition-culture
            value: CULTURE
            varType: string
            variable_selector:
            - node_article_classifier
            - structured_output
            - article_type
          id: culture
          logical_operator: and
        desc: è¨˜äº‹ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦é©åˆ‡ãªãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã¸æŒ¯ã‚Šåˆ†ã‘ã¾ã™
        selected: false
        title: ã‚¿ã‚¤ãƒ—åˆ¥åˆ†å²
        type: if-else
      height: 312
      id: node_type_router
      position:
        x: 1026
        y: 395
      positionAbsolute:
        x: 1026
        y: 395
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆè¨˜äº‹ç”¨ã®æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆ
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-query-announcement
          role: system
          text: 'ã‚ãªãŸã¯æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’æœ€é©åŒ–ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆï¼ˆãŠçŸ¥ã‚‰ã›ãƒ»ãƒªãƒªãƒ¼ã‚¹ï¼‰è¨˜äº‹ã‚’æ¤œç´¢ã™ã‚‹ãŸã‚ã®ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚


            ## å…¥åŠ›æƒ…å ±

            ãƒ†ãƒ¼ãƒ: {{#node_input_parser.structured_output.theme#}}

            ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{#node_input_parser.structured_output.keywords#}}


            ## ã‚¯ã‚¨ãƒªç”Ÿæˆãƒ«ãƒ¼ãƒ«

            - ãƒ†ãƒ¼ãƒã«é–¢é€£ã™ã‚‹ã‚¯ã‚¨ãƒªï¼ˆ2-3å€‹ï¼‰

            - ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆè¨˜äº‹ã®æ§‹æˆå‚è€ƒç”¨ã‚¯ã‚¨ãƒªï¼ˆ1-2å€‹ï¼‰

            - æ–‡ä½“å‚è€ƒç”¨ã‚¯ã‚¨ãƒªï¼ˆ1å€‹ï¼‰

            - å„ã‚¯ã‚¨ãƒªã¯ç°¡æ½”ã«ï¼ˆ1-6å˜èªï¼‰

            '
        - id: user-query-announcement
          role: user
          text: æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              queries:
                items:
                  type: string
                maxItems: 6
                minItems: 3
                type: array
            required:
            - queries
            type: object
        structured_output_enabled: true
        title: ã‚¯ã‚¨ãƒªç”Ÿæˆï¼ˆã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆï¼‰
        type: llm
        vision:
          enabled: false
      height: 132
      id: node_query_gen_announcement
      position:
        x: 1368
        y: 0
      positionAbsolute:
        x: 1368
        y: 0
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆè¨˜äº‹ã®ä¸¦åˆ—æ¤œç´¢
        error_handle_mode: terminated
        flatten_output: true
        height: 280
        is_parallel: true
        iterator_input_type: string
        iterator_selector:
        - node_query_gen_announcement
        - structured_output
        - queries
        output_selector:
        - node_kb_announcement
        - result
        output_type: array[object]
        parallel_nums: 3
        selected: false
        start_node_id: node_search_announcement_start
        title: æ¤œç´¢ï¼ˆã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆï¼‰
        type: iteration
        width: 450
      height: 280
      id: node_search_announcement
      position:
        x: 1710
        y: -60
      positionAbsolute:
        x: 1710
        y: -60
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 450
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: node_search_announcement_start
      parentId: node_search_announcement
      position:
        x: 60
        y: 116
      positionAbsolute:
        x: 1770
        y: 56
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        dataset_ids:
        - T9oOmTCouVy8CThEzkHls5iSYnjKkW5BZ/+rXS8fTROcleRe6epxYyK7S3W0gBEf
        desc: ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆè¨˜äº‹ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹
        isInIteration: true
        isInLoop: false
        iteration_id: node_search_announcement
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-multilingual-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.2
          top_k: 5
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_search_announcement
        - item
        retrieval_mode: multiple
        selected: false
        title: KBï¼ˆã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆï¼‰
        type: knowledge-retrieval
      height: 118
      id: node_kb_announcement
      parentId: node_search_announcement
      position:
        x: 164
        y: 60
      positionAbsolute:
        x: 1874
        y: 0
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      zIndex: 1002
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆè¨˜äº‹ç”¨ã®æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆ
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-query-event
          role: system
          text: 'ã‚ãªãŸã¯æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’æœ€é©åŒ–ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼ˆå‹‰å¼·ä¼šãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå ±å‘Šï¼‰è¨˜äº‹ã‚’æ¤œç´¢ã™ã‚‹ãŸã‚ã®ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚


            ## å…¥åŠ›æƒ…å ±

            ãƒ†ãƒ¼ãƒ: {{#node_input_parser.structured_output.theme#}}

            ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{#node_input_parser.structured_output.keywords#}}


            ## ã‚¯ã‚¨ãƒªç”Ÿæˆãƒ«ãƒ¼ãƒ«

            - ãƒ†ãƒ¼ãƒã«é–¢é€£ã™ã‚‹ã‚¯ã‚¨ãƒªï¼ˆ2-3å€‹ï¼‰

            - ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆã®æ§‹æˆå‚è€ƒç”¨ã‚¯ã‚¨ãƒªï¼ˆ1-2å€‹ï¼‰

            - æ–‡ä½“å‚è€ƒç”¨ã‚¯ã‚¨ãƒªï¼ˆ1å€‹ï¼‰

            - å„ã‚¯ã‚¨ãƒªã¯ç°¡æ½”ã«ï¼ˆ1-6å˜èªï¼‰

            '
        - id: user-query-event
          role: user
          text: æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              queries:
                items:
                  type: string
                maxItems: 6
                minItems: 3
                type: array
            required:
            - queries
            type: object
        structured_output_enabled: true
        title: ã‚¯ã‚¨ãƒªç”Ÿæˆï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼‰
        type: llm
        vision:
          enabled: false
      height: 132
      id: node_query_gen_event
      position:
        x: 1368
        y: 280
      positionAbsolute:
        x: 1368
        y: 280
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆè¨˜äº‹ã®ä¸¦åˆ—æ¤œç´¢
        error_handle_mode: terminated
        flatten_output: true
        height: 280
        is_parallel: true
        iterator_input_type: string
        iterator_selector:
        - node_query_gen_event
        - structured_output
        - queries
        output_selector:
        - node_kb_event
        - result
        output_type: array[object]
        parallel_nums: 3
        selected: false
        start_node_id: node_search_event_start
        title: æ¤œç´¢ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼‰
        type: iteration
        width: 450
      height: 280
      id: node_search_event
      position:
        x: 1710
        y: 220
      positionAbsolute:
        x: 1710
        y: 220
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 450
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: node_search_event_start
      parentId: node_search_event
      position:
        x: 60
        y: 116
      positionAbsolute:
        x: 1770
        y: 336
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        dataset_ids:
        - 8koU71fMg7GwsyBwW8VT2zZnGk/B+q1OWPD/Kc6gODCKMOMjZWrDMg8IldBABGcr
        desc: ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆè¨˜äº‹ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹
        isInIteration: true
        isInLoop: false
        iteration_id: node_search_event
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-multilingual-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.2
          top_k: 5
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_search_event
        - item
        retrieval_mode: multiple
        selected: false
        title: KBï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼‰
        type: knowledge-retrieval
      height: 118
      id: node_kb_event
      parentId: node_search_event
      position:
        x: 164
        y: 60
      positionAbsolute:
        x: 1874
        y: 280
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      zIndex: 1002
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜äº‹ç”¨ã®æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆ
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-query-interview
          role: system
          text: 'ã‚ãªãŸã¯æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’æœ€é©åŒ–ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼ˆç¤¾å“¡ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼‰è¨˜äº‹ã‚’æ¤œç´¢ã™ã‚‹ãŸã‚ã®ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚


            ## å…¥åŠ›æƒ…å ±

            ãƒ†ãƒ¼ãƒ: {{#node_input_parser.structured_output.theme#}}

            ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{#node_input_parser.structured_output.keywords#}}

            ç™»å ´äººç‰©: {{#node_input_parser.structured_output.people#}}


            ## ã‚¯ã‚¨ãƒªç”Ÿæˆãƒ«ãƒ¼ãƒ«

            - ãƒ†ãƒ¼ãƒã«é–¢é€£ã™ã‚‹ã‚¯ã‚¨ãƒªï¼ˆ2-3å€‹ï¼‰

            - ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜äº‹ã®æ§‹æˆå‚è€ƒç”¨ã‚¯ã‚¨ãƒªï¼ˆ1-2å€‹ï¼‰

            - æ–‡ä½“å‚è€ƒç”¨ã‚¯ã‚¨ãƒªï¼ˆ1å€‹ï¼‰

            - å„ã‚¯ã‚¨ãƒªã¯ç°¡æ½”ã«ï¼ˆ1-6å˜èªï¼‰

            '
        - id: user-query-interview
          role: user
          text: æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              queries:
                items:
                  type: string
                maxItems: 6
                minItems: 3
                type: array
            required:
            - queries
            type: object
        structured_output_enabled: true
        title: ã‚¯ã‚¨ãƒªç”Ÿæˆï¼ˆã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼‰
        type: llm
        vision:
          enabled: false
      height: 132
      id: node_query_gen_interview
      position:
        x: 1368
        y: 560
      positionAbsolute:
        x: 1368
        y: 560
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜äº‹ã®ä¸¦åˆ—æ¤œç´¢
        error_handle_mode: terminated
        flatten_output: true
        height: 280
        is_parallel: true
        iterator_input_type: string
        iterator_selector:
        - node_query_gen_interview
        - structured_output
        - queries
        output_selector:
        - node_kb_interview
        - result
        output_type: array[object]
        parallel_nums: 3
        selected: false
        start_node_id: node_search_interview_start
        title: æ¤œç´¢ï¼ˆã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼‰
        type: iteration
        width: 450
      height: 280
      id: node_search_interview
      position:
        x: 1710
        y: 500
      positionAbsolute:
        x: 1710
        y: 500
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 450
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: node_search_interview_start
      parentId: node_search_interview
      position:
        x: 60
        y: 116
      positionAbsolute:
        x: 1770
        y: 616
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        dataset_ids:
        - MJ76sox5qOIVoWvQkEQW5eMwMFGMpvqO/A/0OUFacUz/lC0Pal/u6QAnqcmgkksm
        desc: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜äº‹ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹
        isInIteration: true
        isInLoop: false
        iteration_id: node_search_interview
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-multilingual-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.2
          top_k: 5
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_search_interview
        - item
        retrieval_mode: multiple
        selected: false
        title: KBï¼ˆã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼‰
        type: knowledge-retrieval
      height: 118
      id: node_kb_interview
      parentId: node_search_interview
      position:
        x: 164
        y: 60
      positionAbsolute:
        x: 1874
        y: 560
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      zIndex: 1002
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ã‚«ãƒ«ãƒãƒ£ãƒ¼è¨˜äº‹ç”¨ã®æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆ
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-query-culture
          role: system
          text: 'ã‚ãªãŸã¯æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’æœ€é©åŒ–ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ã‚«ãƒ«ãƒãƒ£ãƒ¼ï¼ˆä¼æ¥­æ–‡åŒ–ãƒ»åˆ¶åº¦ç´¹ä»‹ï¼‰è¨˜äº‹ã‚’æ¤œç´¢ã™ã‚‹ãŸã‚ã®ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚


            ## å…¥åŠ›æƒ…å ±

            ãƒ†ãƒ¼ãƒ: {{#node_input_parser.structured_output.theme#}}

            ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{#node_input_parser.structured_output.keywords#}}


            ## ã‚¯ã‚¨ãƒªç”Ÿæˆãƒ«ãƒ¼ãƒ«

            - ãƒ†ãƒ¼ãƒã«é–¢é€£ã™ã‚‹ã‚¯ã‚¨ãƒªï¼ˆ2-3å€‹ï¼‰

            - ã‚«ãƒ«ãƒãƒ£ãƒ¼è¨˜äº‹ã®æ§‹æˆå‚è€ƒç”¨ã‚¯ã‚¨ãƒªï¼ˆ1-2å€‹ï¼‰

            - æ–‡ä½“å‚è€ƒç”¨ã‚¯ã‚¨ãƒªï¼ˆ1å€‹ï¼‰

            - å„ã‚¯ã‚¨ãƒªã¯ç°¡æ½”ã«ï¼ˆ1-6å˜èªï¼‰

            '
        - id: user-query-culture
          role: user
          text: æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              queries:
                items:
                  type: string
                maxItems: 6
                minItems: 3
                type: array
            required:
            - queries
            type: object
        structured_output_enabled: true
        title: ã‚¯ã‚¨ãƒªç”Ÿæˆï¼ˆã‚«ãƒ«ãƒãƒ£ãƒ¼ï¼‰
        type: llm
        vision:
          enabled: false
      height: 116
      id: node_query_gen_culture
      position:
        x: 1368
        y: 840
      positionAbsolute:
        x: 1368
        y: 840
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: ã‚«ãƒ«ãƒãƒ£ãƒ¼è¨˜äº‹ã®ä¸¦åˆ—æ¤œç´¢
        error_handle_mode: terminated
        flatten_output: true
        height: 280
        is_parallel: true
        iterator_input_type: string
        iterator_selector:
        - node_query_gen_culture
        - structured_output
        - queries
        output_selector:
        - node_kb_culture
        - result
        output_type: array[object]
        parallel_nums: 3
        selected: false
        start_node_id: node_search_culture_start
        title: æ¤œç´¢ï¼ˆã‚«ãƒ«ãƒãƒ£ãƒ¼ï¼‰
        type: iteration
        width: 450
      height: 280
      id: node_search_culture
      position:
        x: 1710
        y: 780
      positionAbsolute:
        x: 1710
        y: 780
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 450
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: node_search_culture_start
      parentId: node_search_culture
      position:
        x: 60
        y: 116
      positionAbsolute:
        x: 1770
        y: 896
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        dataset_ids:
        - cplMlK4lzAxWZxD5Az986vMJ6WEgnZzPm3VL83K+k3qdse77MR5k7axgMjyFJCpv
        desc: ã‚«ãƒ«ãƒãƒ£ãƒ¼è¨˜äº‹ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹
        isInIteration: true
        isInLoop: false
        iteration_id: node_search_culture
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-multilingual-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.2
          top_k: 5
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_search_culture
        - item
        retrieval_mode: multiple
        selected: false
        title: KBï¼ˆã‚«ãƒ«ãƒãƒ£ãƒ¼ï¼‰
        type: knowledge-retrieval
      height: 118
      id: node_kb_culture
      parentId: node_search_culture
      position:
        x: 164
        y: 60
      positionAbsolute:
        x: 1874
        y: 840
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      zIndex: 1002
    - data:
        code: "function main({ \n    announcement_results, \n    event_results, \n\
          \    interview_results, \n    culture_results,\n    article_type\n}) {\n\
          \    try {\n        let allResults = [];\n        \n        // å„ã‚¿ã‚¤ãƒ—ã®çµæœã‚’çµ±åˆï¼ˆåˆ†å²ã«ã‚ˆã‚Š1ã¤ã ã‘ã«çµæœãŒå…¥ã‚‹ï¼‰\n\
          \        const resultSets = [\n            announcement_results,\n     \
          \       event_results,\n            interview_results,\n            culture_results\n\
          \        ];\n        \n        for (const resultSet of resultSets) {\n \
          \           if (Array.isArray(resultSet)) {\n                for (const\
          \ item of resultSet) {\n                    if (Array.isArray(item)) {\n\
          \                        allResults = allResults.concat(item);\n       \
          \             } else if (item && typeof item === 'object') {\n         \
          \               allResults.push(item);\n                    }\n        \
          \        }\n            }\n        }\n        \n        // ã‚¹ã‚³ã‚¢å–å¾—ãƒ˜ãƒ«ãƒ‘ãƒ¼\n \
          \       const getScore = (item) => {\n            if (!item) return 0;\n\
          \            if (typeof item.score === 'number') return item.score;\n  \
          \          if (item.metadata && typeof item.metadata.score === 'number')\
          \ {\n                return item.metadata.score;\n            }\n      \
          \      return 0;\n        };\n        \n        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒãƒƒã‚·ãƒ¥ï¼ˆé‡è¤‡åˆ¤å®šç”¨ï¼‰\n  \
          \      const getContentHash = (content) => {\n            if (!content)\
          \ return '';\n            return content.replace(/\\s+/g, '').toLowerCase().substring(0,\
          \ 200);\n        };\n        \n        // é‡è¤‡æ’é™¤\n        const seen = new\
          \ Set();\n        const uniqueResults = [];\n        \n        for (const\
          \ item of allResults) {\n            if (item && item.content) {\n     \
          \           const hash = getContentHash(item.content);\n               \
          \ if (!seen.has(hash)) {\n                    seen.add(hash);\n        \
          \            uniqueResults.push({\n                        ...item,\n  \
          \                      _score: getScore(item)\n                    });\n\
          \                }\n            }\n        }\n        \n        // ã‚¹ã‚³ã‚¢é †ã‚½ãƒ¼ãƒˆ\n\
          \        uniqueResults.sort((a, b) => b._score - a._score);\n        \n\
          \        // ä¸Šä½10ä»¶\n        const topResults = uniqueResults.slice(0, 10);\n\
          \        \n        // ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ\n        const contextText = topResults.map((item,\
          \ index) => {\n            const title = item.title || item.metadata?.document_name\
          \ || `è¨˜äº‹${index + 1}`;\n            const content = item.content || '';\n\
          \            return `ã€${index + 1}. ${title}ã€‘\\n${content}`;\n        }).join('\\\
          n\\n---\\n\\n');\n        \n        return {\n            merged_results:\
          \ topResults,\n            result_count: topResults.length,\n          \
          \  context_text: contextText,\n            has_results: topResults.length\
          \ > 0,\n            searched_type: article_type || 'UNKNOWN'\n        };\n\
          \    } catch (e) {\n        return {\n            merged_results: [],\n\
          \            result_count: 0,\n            context_text: \"æ¤œç´¢çµæœã®å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:\
          \ \" + e.message,\n            has_results: false,\n            searched_type:\
          \ 'ERROR'\n        };\n    }\n}\n"
        code_language: javascript
        desc: 4ã¤ã®æ¤œç´¢ãƒ‘ã‚¹ã‹ã‚‰ã®çµæœã‚’çµ±åˆï¼ˆå®Ÿéš›ã«ã¯åˆ†å²ã«ã‚ˆã‚Š1ã¤ã ã‘ã«çµæœãŒå…¥ã‚‹ï¼‰
        outputs:
          context_text:
            children: null
            type: string
          has_results:
            children: null
            type: boolean
          merged_results:
            children: null
            type: array[object]
          result_count:
            children: null
            type: number
          searched_type:
            children: null
            type: string
        selected: false
        title: çµæœçµ±åˆ
        type: code
        variables:
        - value_selector:
          - node_search_announcement
          - output
          value_type: array[object]
          variable: announcement_results
        - value_selector:
          - node_search_event
          - output
          value_type: array[object]
          variable: event_results
        - value_selector:
          - node_search_interview
          - output
          value_type: array[object]
          variable: interview_results
        - value_selector:
          - node_search_culture
          - output
          value_type: array[object]
          variable: culture_results
        - value_selector:
          - node_article_classifier
          - structured_output
          - article_type
          value_type: string
          variable: article_type
      height: 96
      id: node_result_merger
      position:
        x: 2260
        y: 452
      positionAbsolute:
        x: 2260
        y: 452
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'ä»Šå›ã®è¨˜äº‹ä½œæˆã«æœ€ã‚‚å‚è€ƒã«ãªã‚‹éå»è¨˜äº‹ã‚’é¸å®šã€‚

          ãƒ†ãƒ¼ãƒé–¢é€£ã€æ§‹æˆå‚è€ƒã€æ–‡ä½“å‚è€ƒã®è¦³ç‚¹ã§ä¸Šä½5è¨˜äº‹ã‚’é¸æŠã€‚

          '
        model:
          completion_params:
            temperature: 0
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-reranker
          role: system
          text: 'ã‚ãªãŸã¯è¨˜äº‹åŸ·ç­†ã®ãŸã‚ã®å‚è€ƒè³‡æ–™ã‚’é¸å®šã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            æ¤œç´¢çµæœã‹ã‚‰ã€ä»Šå›ã®è¨˜äº‹ä½œæˆã«æœ€ã‚‚å‚è€ƒã«ãªã‚‹éå»è¨˜äº‹ã‚’5ã¤é¸å®šã—ã¦ãã ã•ã„ã€‚


            ## ä»Šå›ã®è¨˜äº‹æƒ…å ±

            ãƒ†ãƒ¼ãƒ: {{#node_input_parser.structured_output.theme#}}

            è¨˜äº‹ã‚¿ã‚¤ãƒ—: {{#node_article_classifier.structured_output.article_type_ja#}}


            ## æ¤œç´¢çµæœ

            {{#node_result_merger.context_text#}}


            ## é¸å®šåŸºæº–

            1. ãƒ†ãƒ¼ãƒé–¢é€£ï¼ˆ2è¨˜äº‹ï¼‰: ä»Šå›ã®ãƒ†ãƒ¼ãƒã«é¡ä¼¼ã—ãŸå†…å®¹

            2. æ§‹æˆå‚è€ƒï¼ˆ2è¨˜äº‹ï¼‰: åŒã˜è¨˜äº‹ã‚¿ã‚¤ãƒ—ã§å‚è€ƒã«ãªã‚‹æ§‹æˆ

            3. æ–‡ä½“å‚è€ƒï¼ˆ1è¨˜äº‹ï¼‰: æœ€æ–°ã®æ–‡ä½“ã‚¹ã‚¿ã‚¤ãƒ«ãŒã‚ã‹ã‚‹è¨˜äº‹


            ## å‡ºåŠ›å½¢å¼

            é¸å®šã—ãŸ5è¨˜äº‹ã®å†…å®¹ã‚’ã€ç•ªå·ä»˜ãã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

            å„è¨˜äº‹ã«ã¤ã„ã¦ã€Œé¸å®šç†ç”±ã€ã‚’1æ–‡ã§è¨˜è¼‰ã€‚

            '
        selected: false
        title: å‚è€ƒè¨˜äº‹é¸å®š
        type: llm
        vision:
          enabled: false
      height: 164
      id: node_reranker
      position:
        x: 2602
        y: 420
      positionAbsolute:
        x: 2602
        y: 420
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'éå»è¨˜äº‹ã‹ã‚‰æ–‡ä½“ã®ç‰¹å¾´ã‚’æŠ½å‡ºã—ã¾ã™ã€‚

          èªå°¾ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ãƒˆãƒ¼ãƒ³ã€ç‰¹å¾´çš„ãªãƒ•ãƒ¬ãƒ¼ã‚ºãªã©ã€‚

          '
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-style
          role: system
          text: 'ã‚ãªãŸã¯æ–‡ç« ã‚¹ã‚¿ã‚¤ãƒ«ã‚’åˆ†æã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ä»¥ä¸‹ã®éå»è¨˜äº‹ã‹ã‚‰ã€æ ªå¼ä¼šç¤¾ã‚®ã‚°ãƒ¼ã®noteè¨˜äº‹ã®æ–‡ä½“ç‰¹å¾´ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚


            ## è¨˜äº‹ã‚¿ã‚¤ãƒ—

            {{#node_article_classifier.structured_output.article_type_ja#}}


            ## éå»è¨˜äº‹

            {{#node_reranker.text#}}


            ## åˆ†æé …ç›®

            1. sentence_endings: ã‚ˆãä½¿ã‚ã‚Œã‚‹èªå°¾ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆä¾‹: ã€Œã€œã§ã™ã­ã€ã€Œã€œãªã‚“ã§ã™ã€ï¼‰

            2. tone: å…¨ä½“çš„ãªãƒˆãƒ¼ãƒ³ï¼ˆã‚«ã‚¸ãƒ¥ã‚¢ãƒ«/ãƒ•ã‚©ãƒ¼ãƒãƒ«/ãã®ä¸­é–“ï¼‰

            3. first_person: ä½¿ã‚ã‚Œã¦ã„ã‚‹ä¸€äººç§°ï¼ˆç§/åƒ•/ç­†è€…ãªã©ï¼‰

            4. reader_address: èª­è€…ã¸ã®å‘¼ã³ã‹ã‘æ–¹

            5. paragraph_style: æ®µè½ã®é•·ã•ã‚„åŒºåˆ‡ã‚Šæ–¹ã®å‚¾å‘

            6. emoji_usage: çµµæ–‡å­—ã®ä½¿ç”¨æœ‰ç„¡ã¨é »åº¦

            7. characteristic_phrases: ç‰¹å¾´çš„ãªãƒ•ãƒ¬ãƒ¼ã‚ºã‚„è¨€ã„å›ã—ï¼ˆ5-10å€‹ï¼‰


            ## ãƒ«ãƒ¼ãƒ«

            - å…·ä½“ä¾‹ã‚’æŒ™ã’ã¦èª¬æ˜

            - è¨˜äº‹ã‚¿ã‚¤ãƒ—ã«ç‰¹æœ‰ã®ã‚¹ã‚¿ã‚¤ãƒ«ãŒã‚ã‚Œã°æ˜è¨˜

            - è¤‡æ•°ã®è¨˜äº‹ã«å…±é€šã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å„ªå…ˆ

            '
        - id: user-style
          role: user
          text: ä¸Šè¨˜ã®éå»è¨˜äº‹ã‹ã‚‰æ–‡ä½“ç‰¹å¾´ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              characteristic_phrases:
                description: ç‰¹å¾´çš„ãƒ•ãƒ¬ãƒ¼ã‚º
                items:
                  type: string
                type: array
              emoji_usage:
                description: çµµæ–‡å­—ä½¿ç”¨
                type: string
              first_person:
                description: ä¸€äººç§°
                type: string
              paragraph_style:
                description: æ®µè½ã‚¹ã‚¿ã‚¤ãƒ«
                type: string
              reader_address:
                description: èª­è€…ã¸ã®å‘¼ã³ã‹ã‘æ–¹
                type: string
              sentence_endings:
                description: èªå°¾ãƒ‘ã‚¿ãƒ¼ãƒ³
                items:
                  type: string
                type: array
              tone:
                description: å…¨ä½“çš„ãªãƒˆãƒ¼ãƒ³
                type: string
            required:
            - sentence_endings
            - tone
            - characteristic_phrases
            type: object
        structured_output_enabled: true
        title: æ–‡ä½“åˆ†æ
        type: llm
        vision:
          enabled: false
      height: 164
      id: node_style_analyzer
      position:
        x: 2944
        y: 280
      positionAbsolute:
        x: 2944
        y: 280
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'åŒã‚¿ã‚¤ãƒ—ã®éå»è¨˜äº‹ã‹ã‚‰æ§‹æˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æã€‚

          è¦‹å‡ºã—æ§‹æˆã€ãƒªãƒ¼ãƒ‰æ–‡ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ç· ã‚ãƒ‘ã‚¿ãƒ¼ãƒ³ãªã©ã€‚

          '
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-structure
          role: system
          text: 'ã‚ãªãŸã¯è¨˜äº‹æ§‹æˆã‚’åˆ†æã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ä»¥ä¸‹ã®éå»è¨˜äº‹ã‹ã‚‰ã€è¨˜äº‹ã®æ§‹æˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æã—ã¦ãã ã•ã„ã€‚


            ## ä»Šå›ã®è¨˜äº‹ã‚¿ã‚¤ãƒ—

            {{#node_article_classifier.structured_output.article_type_ja#}}


            ## éå»è¨˜äº‹

            {{#node_reranker.text#}}


            ## åˆ†æé …ç›®

            1. typical_headings: ã‚ˆãä½¿ã‚ã‚Œã‚‹è¦‹å‡ºã—ãƒ‘ã‚¿ãƒ¼ãƒ³

            2. intro_pattern: ãƒªãƒ¼ãƒ‰æ–‡ã®æ›¸ãæ–¹ãƒ‘ã‚¿ãƒ¼ãƒ³

            3. section_flow: ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æµã‚Œï¼ˆå°å…¥â†’å±•é–‹â†’ã¾ã¨ã‚ç­‰ï¼‰

            4. closing_pattern: ç· ã‚ã®æ–‡ç« ãƒ‘ã‚¿ãƒ¼ãƒ³

            5. average_length: å¹³å‡çš„ãªæ–‡å­—æ•°ã®ç›®å®‰


            ## è¨˜äº‹ã‚¿ã‚¤ãƒ—åˆ¥ã®ç‰¹å¾´

            - ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆ: çµè«–å…ˆè¡Œã€ç°¡æ½”ã€ãƒªãƒ³ã‚¯èª˜å°

            - ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆ: æ™‚ç³»åˆ—ã€å‚åŠ è€…ã®å£°ã€å­¦ã³

            - ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼: Q&Aå½¢å¼ã€äººç‰©æå†™ã€ã‚¹ãƒˆãƒ¼ãƒªãƒ¼

            - ã‚«ãƒ«ãƒãƒ£ãƒ¼: åˆ¶åº¦èª¬æ˜ã€å…·ä½“ä¾‹ã€ãƒ¡ãƒªãƒƒãƒˆ

            '
        - id: user-structure
          role: user
          text: ä¸Šè¨˜ã‹ã‚‰æ§‹æˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              average_length:
                type: string
              closing_pattern:
                type: string
              intro_pattern:
                type: string
              section_flow:
                type: string
              typical_headings:
                items:
                  type: string
                type: array
            required:
            - typical_headings
            - intro_pattern
            - closing_pattern
            type: object
        structured_output_enabled: true
        title: æ§‹æˆåˆ†æ
        type: llm
        vision:
          enabled: false
      height: 164
      id: node_structure_analyzer
      position:
        x: 2944
        y: 540
      positionAbsolute:
        x: 2944
        y: 540
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'è¨˜äº‹ã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ï¼ˆéª¨å­ï¼‰ã‚’ç”Ÿæˆã€‚

          è¦‹å‡ºã—æ§‹æˆã¨å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æ¦‚è¦ã‚’æ±ºå®šã€‚

          '
        model:
          completion_params:
            temperature: 0.5
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-outline
          role: system
          text: 'ã‚ãªãŸã¯è¨˜äº‹æ§‹æˆã®å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ä»¥ä¸‹ã®æƒ…å ±ã‚’ã‚‚ã¨ã«ã€è¨˜äº‹ã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ï¼ˆéª¨å­ï¼‰ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚


            ## è¨˜äº‹æƒ…å ±

            ãƒ†ãƒ¼ãƒ: {{#node_input_parser.structured_output.theme#}}

            è¨˜äº‹ã‚¿ã‚¤ãƒ—: {{#node_article_classifier.structured_output.article_type_ja#}}

            ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ: {{#node_input_parser.structured_output.key_points#}}

            ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼å¼•ç”¨: {{#node_input_parser.structured_output.interview_quotes#}}


            ## æ§‹æˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆéå»è¨˜äº‹åˆ†æçµæœï¼‰

            å…¸å‹çš„ãªè¦‹å‡ºã—: {{#node_structure_analyzer.structured_output.typical_headings#}}

            ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æµã‚Œ: {{#node_structure_analyzer.structured_output.section_flow#}}


            ## è¨˜äº‹ã‚¿ã‚¤ãƒ—åˆ¥ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

            - ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆ: æ¦‚è¦â†’è©³ç´°â†’ä»Šå¾Œã®å±•é–‹â†’CTA

            - ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆ: å°å…¥â†’ã‚¤ãƒ™ãƒ³ãƒˆæ¦‚è¦â†’å­¦ã³ãƒ»æ°—ã¥ãâ†’ã¾ã¨ã‚

            - ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼: äººç‰©ç´¹ä»‹â†’ãã£ã‹ã‘â†’ç¾åœ¨ã®ä»•äº‹â†’ä»Šå¾Œã®å±•æœ›

            - ã‚«ãƒ«ãƒãƒ£ãƒ¼: åˆ¶åº¦ç´¹ä»‹â†’å…·ä½“çš„ãªé‹ç”¨â†’ç¤¾å“¡ã®å£°â†’ã¾ã¨ã‚


            ## åˆ¶ç´„

            - è¦‹å‡ºã—ã¯2ã€œ4å€‹

            - å…¨ä½“ã§1,500å­—ç¨‹åº¦ã‚’æƒ³å®š

            - å„è¦‹å‡ºã—ã«å¯¾ã—ã¦ã€ãã®ä¸‹ã«æ›¸ãå†…å®¹ã®æ¦‚è¦ã‚’è¨˜è¼‰

            '
        - id: user-outline
          role: user
          text: ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              headings:
                items:
                  properties:
                    key_content:
                      description: å«ã‚ã‚‹ã¹ãç´ æã‹ã‚‰ã®æƒ…å ±
                      items:
                        type: string
                      type: array
                    summary:
                      description: ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§æ›¸ãå†…å®¹ã®æ¦‚è¦
                      type: string
                    target_length:
                      description: ç›®æ¨™æ–‡å­—æ•°
                      type: number
                    title:
                      description: è¦‹å‡ºã—ãƒ†ã‚­ã‚¹ãƒˆ
                      type: string
                  type: object
                maxItems: 4
                minItems: 2
                type: array
              total_target_length:
                description: æœ¬æ–‡å…¨ä½“ã®ç›®æ¨™æ–‡å­—æ•°
                type: number
            required:
            - headings
            - total_target_length
            type: object
        structured_output_enabled: true
        title: ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ç”Ÿæˆ
        type: llm
        vision:
          enabled: false
      height: 148
      id: node_outline_generator
      position:
        x: 3286
        y: 410
      positionAbsolute:
        x: 3286
        y: 410
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'éå»è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‚è€ƒã«3æ¡ˆç”Ÿæˆã€‚

          ã‚¯ãƒªãƒƒã‚¯ç‡ã‚’æ„è­˜ã—ãŸé­…åŠ›çš„ãªã‚¿ã‚¤ãƒˆãƒ«ã€‚

          '
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-title
          role: system
          text: 'ã‚ãªãŸã¯noteè¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’è€ƒãˆã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ä»¥ä¸‹ã®æƒ…å ±ã‚’ã‚‚ã¨ã«ã€é­…åŠ›çš„ãªã‚¿ã‚¤ãƒˆãƒ«æ¡ˆã‚’3ã¤ä½œæˆã—ã¦ãã ã•ã„ã€‚


            ## è¨˜äº‹æƒ…å ±

            ãƒ†ãƒ¼ãƒ: {{#node_input_parser.structured_output.theme#}}

            è¨˜äº‹ã‚¿ã‚¤ãƒ—: {{#node_article_classifier.structured_output.article_type_ja#}}

            ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³: {{#node_outline_generator.structured_output.headings#}}


            ## éå»è¨˜äº‹ã®å‚è€ƒæƒ…å ±

            {{#node_reranker.text#}}


            ## è¨˜äº‹ã‚¿ã‚¤ãƒ—åˆ¥ã‚¿ã‚¤ãƒˆãƒ«å‚¾å‘

            - ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆ: ã€Œã€‡ã€‡ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã€ã€Œã€‡ã€‡ã®ãŠçŸ¥ã‚‰ã›ã€

            - ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆ: ã€Œã€‡ã€‡å‹‰å¼·ä¼šãƒ¬ãƒãƒ¼ãƒˆã€ã€Œã€‡ã€‡ã«å‚åŠ ã—ã¦ãã¾ã—ãŸã€

            - ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼: ã€Œã€‡ã€‡ã•ã‚“ã«èã„ã¦ã¿ãŸã€ã€Œå…¥ç¤¾Nå¹´ç›®ã®æœ¬éŸ³ã€

            - ã‚«ãƒ«ãƒãƒ£ãƒ¼: ã€Œã‚®ã‚°ãƒ¼ã®ã€‡ã€‡åˆ¶åº¦ã‚’ç´¹ä»‹ã€ã€Œã“ã‚“ãªåƒãæ–¹ã—ã¦ã„ã¾ã™ã€


            ## ã‚¿ã‚¤ãƒˆãƒ«ä½œæˆã®ãƒã‚¤ãƒ³ãƒˆ

            - ã‚¿ãƒ¼ã‚²ãƒƒãƒˆèª­è€…: è»¢è·ã‚’æ¤œè¨ã—ã¦ã„ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢

            - ç›®çš„: æ¡ç”¨åºƒå ±ã€ä¼æ¥­æ–‡åŒ–ã®ç´¹ä»‹

            - æ ªå¼ä¼šç¤¾ã‚®ã‚°ãƒ¼ã‚‰ã—ã•ã‚’å‡ºã™

            - ã‚¯ãƒªãƒƒã‚¯ã—ãŸããªã‚‹é­…åŠ›çš„ãªè¡¨ç¾

            - 30æ–‡å­—å‰å¾Œã‚’ç›®å®‰

            '
        - id: user-title
          role: user
          text: ã‚¿ã‚¤ãƒˆãƒ«æ¡ˆã‚’3ã¤ä½œæˆã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              titles:
                items:
                  type: string
                maxItems: 3
                minItems: 3
                type: array
            required:
            - titles
            type: object
        structured_output_enabled: true
        title: ã‚¿ã‚¤ãƒˆãƒ«ç”Ÿæˆ
        type: llm
        vision:
          enabled: false
      height: 164
      id: node_title_generator
      position:
        x: 3628
        y: 220
      positionAbsolute:
        x: 3628
        y: 220
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'è¨˜äº‹ã®å†’é ­ã‚’é£¾ã‚‹ãƒªãƒ¼ãƒ‰æ–‡ã‚’ç”Ÿæˆã€‚

          100ã€œ150å­—ã§è¨˜äº‹ã®å†…å®¹ã‚’é­…åŠ›çš„ã«ç´¹ä»‹ã€‚

          '
        model:
          completion_params:
            temperature: 0.5
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-lead
          role: system
          text: 'ã‚ãªãŸã¯æ ªå¼ä¼šç¤¾ã‚®ã‚°ãƒ¼ã®noteè¨˜äº‹ãƒ©ã‚¤ã‚¿ãƒ¼ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            è¨˜äº‹ã®å†’é ­ã‚’é£¾ã‚‹ãƒªãƒ¼ãƒ‰æ–‡ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚


            ## è¨˜äº‹æƒ…å ±

            ãƒ†ãƒ¼ãƒ: {{#node_input_parser.structured_output.theme#}}

            è¨˜äº‹ã‚¿ã‚¤ãƒ—: {{#node_article_classifier.structured_output.article_type_ja#}}

            ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³: {{#node_outline_generator.structured_output.headings#}}


            ## æ–‡ä½“ã‚¬ã‚¤ãƒ‰

            ãƒˆãƒ¼ãƒ³: {{#node_style_analyzer.structured_output.tone#}}

            èªå°¾ãƒ‘ã‚¿ãƒ¼ãƒ³: {{#node_style_analyzer.structured_output.sentence_endings#}}

            ç‰¹å¾´çš„ãƒ•ãƒ¬ãƒ¼ã‚º: {{#node_style_analyzer.structured_output.characteristic_phrases#}}


            ## éå»è¨˜äº‹ã®ãƒªãƒ¼ãƒ‰æ–‡ãƒ‘ã‚¿ãƒ¼ãƒ³

            {{#node_structure_analyzer.structured_output.intro_pattern#}}


            ## åˆ¶ç´„

            - 100ã€œ150å­—

            - è¨˜äº‹ã‚’èª­ã¿ãŸããªã‚‹é­…åŠ›çš„ãªæ›¸ãå‡ºã—

            - æ–‡ä½“ã‚¬ã‚¤ãƒ‰ã«å¾“ã†

            - ã‚¿ãƒ¼ã‚²ãƒƒãƒˆèª­è€…ï¼ˆè»¢è·æ¤œè¨ä¸­ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼‰ã‚’æ„è­˜

            '
        - id: user-lead
          role: user
          text: ãƒªãƒ¼ãƒ‰æ–‡ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
        selected: false
        title: ãƒªãƒ¼ãƒ‰æ–‡ç”Ÿæˆ
        type: llm
        vision:
          enabled: false
      height: 148
      id: node_lead_generator
      position:
        x: 3628
        y: 440
      positionAbsolute:
        x: 3628
        y: 440
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: å„è¦‹å‡ºã—ã«å¯¾ã—ã¦æœ¬æ–‡ã‚’é †æ¬¡ç”Ÿæˆ
        error_handle_mode: terminated
        flatten_output: false
        height: 350
        is_parallel: false
        iterator_input_type: object
        iterator_selector:
        - node_outline_generator
        - structured_output
        - headings
        output_selector:
        - node_section_generator
        - text
        output_type: array[string]
        parallel_nums: 1
        selected: false
        start_node_id: node_body_iteration_start
        title: æœ¬æ–‡ç”Ÿæˆã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
        type: iteration
        width: 520
      height: 350
      id: node_body_iteration
      position:
        x: 3628
        y: 660
      positionAbsolute:
        x: 3628
        y: 660
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 520
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: node_body_iteration_start
      parentId: node_body_iteration
      position:
        x: 60
        y: 151
      positionAbsolute:
        x: 3688
        y: 811
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: å„è¦‹å‡ºã—ã®æœ¬æ–‡ã‚’ç”Ÿæˆ
        isInIteration: true
        isInLoop: false
        iteration_id: node_body_iteration
        model:
          completion_params:
            temperature: 0.5
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-section
          role: system
          text: 'ã‚ãªãŸã¯æ ªå¼ä¼šç¤¾ã‚®ã‚°ãƒ¼ã®noteè¨˜äº‹ãƒ©ã‚¤ã‚¿ãƒ¼ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            æŒ‡å®šã•ã‚ŒãŸè¦‹å‡ºã—ã®æœ¬æ–‡ã‚’åŸ·ç­†ã—ã¦ãã ã•ã„ã€‚


            ## è¦‹å‡ºã—æƒ…å ±

            {{#node_body_iteration.item#}}


            ## è¨˜äº‹ã‚¿ã‚¤ãƒ—

            {{#node_article_classifier.structured_output.article_type_ja#}}


            ## å…¥åŠ›ç´ æ

            ãƒ†ãƒ¼ãƒ: {{#node_input_parser.structured_output.theme#}}

            ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ: {{#node_input_parser.structured_output.key_points#}}

            ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼å¼•ç”¨: {{#node_input_parser.structured_output.interview_quotes#}}

            ãƒ‡ãƒ¼ã‚¿ãƒ»æ•°å€¤: {{#node_input_parser.structured_output.data_facts#}}

            ç™»å ´äººç‰©: {{#node_input_parser.structured_output.people#}}


            ## æ–‡ä½“ã‚¬ã‚¤ãƒ‰ï¼ˆå¿…ãšå¾“ã†ã“ã¨ï¼‰

            ãƒˆãƒ¼ãƒ³: {{#node_style_analyzer.structured_output.tone#}}

            èªå°¾ãƒ‘ã‚¿ãƒ¼ãƒ³: {{#node_style_analyzer.structured_output.sentence_endings#}}

            ä¸€äººç§°: {{#node_style_analyzer.structured_output.first_person#}}

            èª­è€…ã¸ã®å‘¼ã³ã‹ã‘: {{#node_style_analyzer.structured_output.reader_address#}}

            ç‰¹å¾´çš„ãƒ•ãƒ¬ãƒ¼ã‚º: {{#node_style_analyzer.structured_output.characteristic_phrases#}}


            ## çµ¶å¯¾ãƒ«ãƒ¼ãƒ«

            1. å…¥åŠ›ç´ æã«å«ã¾ã‚Œãªã„å…·ä½“çš„ãªæ•°å€¤ãƒ»å›ºæœ‰åè©ã¯è£œå®Œã—ãªã„

            2. ä¸æ˜ãªæƒ…å ±ã¯ [è¦ç¢ºèª: ã€‡ã€‡] ã¨è¨˜è¼‰

            3. ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼å¼•ç”¨ã¯ã€Œã€ã§æ‹¬ã£ã¦ä½¿ç”¨

            4. æ–‡ä½“ã‚¬ã‚¤ãƒ‰ã®èªå°¾ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨

            5. äº‹å®Ÿã¨ç•°ãªã‚‹æƒ…å ±ã‚’å‰µä½œã—ãªã„


            ## å‡ºåŠ›

            è¦‹å‡ºã—ã®æœ¬æ–‡ã®ã¿ã‚’å‡ºåŠ›ï¼ˆè¦‹å‡ºã—è‡ªä½“ã¯å«ã‚ãªã„ï¼‰

            '
        - id: user-section
          role: user
          text: ã“ã®è¦‹å‡ºã—ã®æœ¬æ–‡ã‚’åŸ·ç­†ã—ã¦ãã ã•ã„ã€‚
        selected: false
        title: ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç”Ÿæˆ
        type: llm
        vision:
          enabled: false
      height: 116
      id: node_section_generator
      parentId: node_body_iteration
      position:
        x: 184
        y: 93
      positionAbsolute:
        x: 3812
        y: 753
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      zIndex: 1002
    - data:
        code: "function main({ titles, lead, body_sections, outline }) {\n    try\
          \ {\n        // è¦‹å‡ºã—æƒ…å ±ã‚’å–å¾—\n        const headings = outline?.headings ||\
          \ [];\n        \n        // ã‚¿ã‚¤ãƒˆãƒ«æ¡ˆã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n        const titleText = (titles\
          \ || []).map((t, i) => `${i + 1}. ${t}`).join('\\n');\n        \n      \
          \  // æœ¬æ–‡ã‚’çµ„ã¿ç«‹ã¦\n        let bodyText = '';\n        const sections = body_sections\
          \ || [];\n        \n        for (let i = 0; i < headings.length && i < sections.length;\
          \ i++) {\n            const heading = headings[i]?.title || `è¦‹å‡ºã—${i + 1}`;\n\
          \            const content = sections[i] || '';\n            bodyText +=\
          \ `### ${heading}\\n\\n${content}\\n\\n`;\n        }\n        \n       \
          \ // æœ¬æ–‡ã®æ–‡å­—æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ\n        const bodyLength = bodyText.replace(/\\s/g, '').length;\n\
          \        \n        return {\n            title_section: titleText,\n   \
          \         lead_section: lead || '',\n            body_section: bodyText.trim(),\n\
          \            body_length: bodyLength,\n            heading_count: headings.length\n\
          \        };\n    } catch (e) {\n        return {\n            title_section:\
          \ '',\n            lead_section: '',\n            body_section: 'ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:\
          \ ' + e.message,\n            body_length: 0,\n            heading_count:\
          \ 0\n        };\n    }\n}\n"
        code_language: javascript
        desc: ã‚¿ã‚¤ãƒˆãƒ«ã€ãƒªãƒ¼ãƒ‰æ–‡ã€æœ¬æ–‡ã‚’çµ„ã¿ç«‹ã¦
        outputs:
          body_length:
            children: null
            type: number
          body_section:
            children: null
            type: string
          heading_count:
            children: null
            type: number
          lead_section:
            children: null
            type: string
          title_section:
            children: null
            type: string
        selected: false
        title: ãƒ‰ãƒ©ãƒ•ãƒˆçµ„ã¿ç«‹ã¦
        type: code
        variables:
        - value_selector:
          - node_title_generator
          - structured_output
          - titles
          variable: titles
        - value_selector:
          - node_lead_generator
          - text
          variable: lead
        - value_selector:
          - node_body_iteration
          - output
          variable: body_sections
        - value_selector:
          - node_outline_generator
          - structured_output
          variable: outline
      height: 80
      id: node_draft_assembler
      position:
        x: 4248
        y: 470
      positionAbsolute:
        x: 4248
        y: 470
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: è¨˜äº‹ã®ç· ã‚ããã‚Šã‚’ç”Ÿæˆ
        model:
          completion_params:
            temperature: 0.5
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-closing
          role: system
          text: 'ã‚ãªãŸã¯æ ªå¼ä¼šç¤¾ã‚®ã‚°ãƒ¼ã®noteè¨˜äº‹ãƒ©ã‚¤ã‚¿ãƒ¼ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            è¨˜äº‹ã®ç· ã‚ã®æ–‡ç« ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚


            ## è¨˜äº‹æƒ…å ±

            ãƒ†ãƒ¼ãƒ: {{#node_input_parser.structured_output.theme#}}

            è¨˜äº‹ã‚¿ã‚¤ãƒ—: {{#node_article_classifier.structured_output.article_type_ja#}}

            æœ¬æ–‡: {{#node_draft_assembler.body_section#}}


            ## æ–‡ä½“ã‚¬ã‚¤ãƒ‰

            ãƒˆãƒ¼ãƒ³: {{#node_style_analyzer.structured_output.tone#}}

            èªå°¾ãƒ‘ã‚¿ãƒ¼ãƒ³: {{#node_style_analyzer.structured_output.sentence_endings#}}


            ## éå»è¨˜äº‹ã®ç· ã‚ãƒ‘ã‚¿ãƒ¼ãƒ³

            {{#node_structure_analyzer.structured_output.closing_pattern#}}


            ## è¨˜äº‹ã‚¿ã‚¤ãƒ—åˆ¥ç· ã‚æ–¹

            - ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆ: ã‚µãƒ¼ãƒ“ã‚¹ã¸ã®èª˜å°ã€ä»Šå¾Œã®å±•é–‹

            - ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆ: æ¬¡å›äºˆå‘Šã€å‚åŠ å‹Ÿé›†

            - ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼: å¿œå‹Ÿã¸ã®èª˜å°ã€SNSãƒ•ã‚©ãƒ­ãƒ¼ä¿ƒé€²

            - ã‚«ãƒ«ãƒãƒ£ãƒ¼: æ¡ç”¨ã‚µã‚¤ãƒˆã¸ã®èª˜å°ã€å•ã„åˆã‚ã›æ¡ˆå†…


            ## åˆ¶ç´„

            - 3ã€œ5æ–‡ç¨‹åº¦

            - èª­å¾Œæ„Ÿã®è‰¯ã„ç· ã‚ããã‚Š

            - é©åˆ‡ãªCTAï¼ˆCall To Actionï¼‰ã‚’å«ã‚ã‚‹

            - æ–‡ä½“ã‚¬ã‚¤ãƒ‰ã«å¾“ã†

            '
        - id: user-closing
          role: user
          text: ç· ã‚ã®æ–‡ç« ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
        selected: false
        title: ç· ã‚ç”Ÿæˆ
        type: llm
        vision:
          enabled: false
      height: 116
      id: node_closing_generator
      position:
        x: 4590
        y: 438
      positionAbsolute:
        x: 4590
        y: 438
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'ç”Ÿæˆã•ã‚ŒãŸè¨˜äº‹ãŒæ–‡ä½“ã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦ã„ã‚‹ã‹æ¤œè¨¼ã€‚

          ä¸ä¸€è‡´ç®‡æ‰€ã¨ä¿®æ­£ææ¡ˆã‚’å‡ºåŠ›ã€‚

          '
        model:
          completion_params:
            temperature: 0.1
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-style-check
          role: system
          text: 'ã‚ãªãŸã¯æ–‡ä½“ã®ä¸€è²«æ€§ã‚’æ¤œè¨¼ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ç”Ÿæˆã•ã‚ŒãŸè¨˜äº‹ãŒæ–‡ä½“ã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦ã„ã‚‹ã‹æ¤œè¨¼ã—ã¦ãã ã•ã„ã€‚


            ## æ–‡ä½“ã‚¬ã‚¤ãƒ‰

            èªå°¾ãƒ‘ã‚¿ãƒ¼ãƒ³: {{#node_style_analyzer.structured_output.sentence_endings#}}

            ãƒˆãƒ¼ãƒ³: {{#node_style_analyzer.structured_output.tone#}}

            ä¸€äººç§°: {{#node_style_analyzer.structured_output.first_person#}}

            ç‰¹å¾´çš„ãƒ•ãƒ¬ãƒ¼ã‚º: {{#node_style_analyzer.structured_output.characteristic_phrases#}}


            ## ç”Ÿæˆã•ã‚ŒãŸè¨˜äº‹

            ãƒªãƒ¼ãƒ‰æ–‡:

            {{#node_draft_assembler.lead_section#}}


            æœ¬æ–‡:

            {{#node_draft_assembler.body_section#}}


            ç· ã‚:

            {{#node_closing_generator.text#}}


            ## æ¤œè¨¼é …ç›®

            1. èªå°¾ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä½¿ç”¨ç‡

            2. ãƒˆãƒ¼ãƒ³ã®ä¸€è²«æ€§

            3. ä¸€äººç§°ã®çµ±ä¸€

            4. ç‰¹å¾´çš„ãƒ•ãƒ¬ãƒ¼ã‚ºã®ä½¿ç”¨

            5. ä¸è‡ªç„¶ãªè¡¨ç¾

            '
        - id: user-style-check
          role: user
          text: æ–‡ä½“ã®ä¸€è²«æ€§ã‚’æ¤œè¨¼ã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              consistency_score:
                description: ä¸€è²«æ€§ã‚¹ã‚³ã‚¢ï¼ˆ0-1ï¼‰
                maximum: 1
                minimum: 0
                type: number
              corrected_sections:
                description: ä¿®æ­£ãŒå¿…è¦ãªç®‡æ‰€ã®ä¿®æ­£æ¡ˆ
                items:
                  properties:
                    corrected:
                      type: string
                    original:
                      type: string
                  type: object
                type: array
              is_consistent:
                description: æ–‡ä½“ãŒä¸€è²«ã—ã¦ã„ã‚‹ã‹
                type: boolean
              issues:
                description: ä¸ä¸€è‡´ç®‡æ‰€
                items:
                  properties:
                    issue:
                      type: string
                    location:
                      type: string
                    suggestion:
                      type: string
                  type: object
                type: array
            required:
            - is_consistent
            - consistency_score
            type: object
        structured_output_enabled: true
        title: æ–‡ä½“æ¤œè¨¼
        type: llm
        vision:
          enabled: false
      height: 148
      id: node_style_checker
      position:
        x: 4932
        y: 330
      positionAbsolute:
        x: 4932
        y: 330
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'å…¥åŠ›ç´ æã«ãªã„æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ãªã„ã‹æ¤œè¨¼ã€‚

          ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®æ¤œå‡ºã¨[è¦ç¢ºèª]ã‚¿ã‚°å€™è£œã®ç‰¹å®šã€‚

          '
        model:
          completion_params:
            temperature: 0
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-hallucination
          role: system
          text: 'ã‚ãªãŸã¯äº‹å®Ÿç¢ºèªã®å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ç”Ÿæˆã•ã‚ŒãŸè¨˜äº‹ã«ã€å…¥åŠ›ç´ æã«ãªã„æƒ…å ±ï¼ˆãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ãŒå«ã¾ã‚Œã¦ã„ãªã„ã‹æ¤œè¨¼ã—ã¦ãã ã•ã„ã€‚


            ## å…¥åŠ›ç´ æï¼ˆã“ã‚ŒãŒäº‹å®Ÿã®æ ¹æ‹ ï¼‰

            ãƒ†ãƒ¼ãƒ: {{#node_input_parser.structured_output.theme#}}

            ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ: {{#node_input_parser.structured_output.key_points#}}

            ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼å¼•ç”¨: {{#node_input_parser.structured_output.interview_quotes#}}

            ãƒ‡ãƒ¼ã‚¿ãƒ»æ•°å€¤: {{#node_input_parser.structured_output.data_facts#}}

            ç™»å ´äººç‰©: {{#node_input_parser.structured_output.people#}}


            ## ç”Ÿæˆã•ã‚ŒãŸè¨˜äº‹

            ãƒªãƒ¼ãƒ‰æ–‡:

            {{#node_draft_assembler.lead_section#}}


            æœ¬æ–‡:

            {{#node_draft_assembler.body_section#}}


            ç· ã‚:

            {{#node_closing_generator.text#}}


            ## æ¤œè¨¼ãƒ«ãƒ¼ãƒ«

            1. è¨˜äº‹å†…ã®å…·ä½“çš„ãªäº‹å®Ÿï¼ˆæ•°å€¤ã€æ—¥ä»˜ã€å›ºæœ‰åè©ã€ç™ºè¨€ï¼‰ã‚’æŠ½å‡º

            2. å„äº‹å®ŸãŒå…¥åŠ›ç´ æã«å­˜åœ¨ã™ã‚‹ã‹ç…§åˆ

            3. å­˜åœ¨ã—ãªã„äº‹å®Ÿã‚’ã€Œè¦ç¢ºèªå€™è£œã€ã¨ã—ã¦ãƒãƒ¼ã‚¯

            4. ä¸€èˆ¬çš„ãªè¡¨ç¾ï¼ˆæ„Ÿæƒ³ã€å½¢å®¹è©ãªã©ï¼‰ã¯è¨±å®¹


            ## é‡ç‚¹ãƒã‚§ãƒƒã‚¯é …ç›®

            - æ•°å€¤ï¼ˆå¹´æ•°ã€é‡‘é¡ã€äººæ•°ãªã©ï¼‰

            - å›ºæœ‰åè©ï¼ˆè£½å“åã€ã‚µãƒ¼ãƒ“ã‚¹åã€äººåãªã©ï¼‰

            - å…·ä½“çš„ãªæ—¥ä»˜ãƒ»æœŸé–“

            - ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ç™ºè¨€ï¼ˆã€Œã€å†…ï¼‰

            '
        - id: user-hallucination
          role: user
          text: ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¤œå‡ºã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              confidence:
                description: æ¤œè¨¼ã®ä¿¡é ¼åº¦
                maximum: 1
                minimum: 0
                type: number
              has_hallucination:
                description: ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã‹
                type: boolean
              missing_citations:
                description: å¼•ç”¨å…ƒãŒä¸æ˜ãªç™ºè¨€
                items:
                  type: string
                type: array
              unverified_claims:
                description: å…¥åŠ›ç´ æã§ç¢ºèªã§ããªã‹ã£ãŸä¸»å¼µ
                items:
                  properties:
                    claim:
                      type: string
                    location:
                      type: string
                    suggested_tag:
                      type: string
                  type: object
                type: array
              verified_facts:
                description: å…¥åŠ›ç´ æã§ç¢ºèªã§ããŸäº‹å®Ÿ
                items:
                  type: string
                type: array
            required:
            - has_hallucination
            - confidence
            type: object
        structured_output_enabled: true
        title: ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³æ¤œçŸ¥
        type: llm
        vision:
          enabled: false
      height: 164
      id: node_hallucination_detector
      position:
        x: 5274
        y: 330
      positionAbsolute:
        x: 5274
        y: 330
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "function main({ \n    lead, body, closing, \n    style_issues, unverified_claims,\
          \ \n    corrected_sections \n}) {\n    try {\n        let correctedLead\
          \ = lead || '';\n        let correctedBody = body || '';\n        let correctedClosing\
          \ = closing || '';\n        \n        // æ–‡ä½“ä¿®æ­£ã‚’é©ç”¨\n        if (Array.isArray(corrected_sections))\
          \ {\n            for (const correction of corrected_sections) {\n      \
          \          if (correction.original && correction.corrected) {\n        \
          \            correctedLead = correctedLead.replace(\n                  \
          \      correction.original, \n                        correction.corrected\n\
          \                    );\n                    correctedBody = correctedBody.replace(\n\
          \                        correction.original, \n                       \
          \ correction.corrected\n                    );\n                    correctedClosing\
          \ = correctedClosing.replace(\n                        correction.original,\
          \ \n                        correction.corrected\n                    );\n\
          \                }\n            }\n        }\n        \n        // [è¦ç¢ºèª]ã‚¿ã‚°ã‚’æŒ¿å…¥\n\
          \        let tagCount = 0;\n        if (Array.isArray(unverified_claims))\
          \ {\n            for (const item of unverified_claims) {\n             \
          \   if (item.claim && item.suggested_tag) {\n                    const tag\
          \ = `[è¦ç¢ºèª: ${item.suggested_tag}]`;\n                    // è©²å½“ç®‡æ‰€ã‚’æ¢ã—ã¦ç½®æ›\n\
          \                    if (correctedBody.includes(item.claim)) {\n       \
          \                 correctedBody = correctedBody.replace(\n             \
          \               item.claim,\n                            `${item.claim}\
          \ ${tag}`\n                        );\n                        tagCount++;\n\
          \                    } else if (correctedLead.includes(item.claim)) {\n\
          \                        correctedLead = correctedLead.replace(\n      \
          \                      item.claim,\n                            `${item.claim}\
          \ ${tag}`\n                        );\n                        tagCount++;\n\
          \                    }\n                }\n            }\n        }\n  \
          \      \n        return {\n            corrected_lead: correctedLead,\n\
          \            corrected_body: correctedBody,\n            corrected_closing:\
          \ correctedClosing,\n            tag_count: tagCount,\n            style_fix_count:\
          \ (corrected_sections || []).length\n        };\n    } catch (e) {\n   \
          \     return {\n            corrected_lead: lead || '',\n            corrected_body:\
          \ body || '',\n            corrected_closing: closing || '',\n         \
          \   tag_count: 0,\n            style_fix_count: 0\n        };\n    }\n}\n"
        code_language: javascript
        desc: æ–‡ä½“ä¿®æ­£ã¨[è¦ç¢ºèª]ã‚¿ã‚°ã®æŒ¿å…¥
        outputs:
          corrected_body:
            children: null
            type: string
          corrected_closing:
            children: null
            type: string
          corrected_lead:
            children: null
            type: string
          style_fix_count:
            children: null
            type: number
          tag_count:
            children: null
            type: number
        selected: false
        title: ä¿®æ­£ãƒ»ã‚¿ã‚°æŒ¿å…¥
        type: code
        variables:
        - value_selector:
          - node_draft_assembler
          - lead_section
          variable: lead
        - value_selector:
          - node_draft_assembler
          - body_section
          variable: body
        - value_selector:
          - node_closing_generator
          - text
          variable: closing
        - value_selector:
          - node_style_checker
          - structured_output
          - issues
          variable: style_issues
        - value_selector:
          - node_hallucination_detector
          - structured_output
          - unverified_claims
          variable: unverified_claims
        - value_selector:
          - node_style_checker
          - structured_output
          - corrected_sections
          variable: corrected_sections
      height: 80
      id: node_tag_inserter
      position:
        x: 5616
        y: 390
      positionAbsolute:
        x: 5616
        y: 390
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "function main({ \n    titles, \n    corrected_lead, \n    corrected_body,\
          \ \n    corrected_closing,\n    body_length,\n    tag_count,\n    style_fix_count,\n\
          \    article_type,\n    article_type_ja,\n    style_score,\n    hallucination_confidence\n\
          }) {\n    try {\n        // ã‚¿ã‚¤ãƒˆãƒ«æ¡ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³\n        const titleSection = `##\
          \ ã‚¿ã‚¤ãƒˆãƒ«æ¡ˆï¼ˆ3ã¤ï¼‰\\n\\n${\n            (titles || []).map((t, i) => `${i + 1}.\
          \ ${t}`).join('\\n')\n        }`;\n        \n        // ãƒªãƒ¼ãƒ‰æ–‡ã‚»ã‚¯ã‚·ãƒ§ãƒ³\n    \
          \    const leadLength = (corrected_lead || '').replace(/\\s/g, '').length;\n\
          \        const leadSection = `## ãƒªãƒ¼ãƒ‰æ–‡ï¼ˆ${leadLength}å­—ï¼‰\\n\\n${corrected_lead\
          \ || ''}`;\n        \n        // æœ¬æ–‡ã‚»ã‚¯ã‚·ãƒ§ãƒ³\n        const bodyLength = (corrected_body\
          \ || '').replace(/\\s/g, '').length;\n        const bodySection = `## æœ¬æ–‡ï¼ˆ${bodyLength}å­—ï¼‰\\\
          n\\n${corrected_body || ''}`;\n        \n        // ç· ã‚ã‚»ã‚¯ã‚·ãƒ§ãƒ³\n        const\
          \ closingSection = `## ç· ã‚ã®æ–‡ç« \\n\\n${corrected_closing || ''}`;\n       \
          \ \n        // ãƒ¡ã‚¿æƒ…å ±\n        const totalLength = leadLength + bodyLength\
          \ + (corrected_closing || '').replace(/\\s/g, '').length;\n        const\
          \ metaSection = `---\\n\\n### \U0001F4CA ãƒ¡ã‚¿æƒ…å ±\\n\n- **è¨˜äº‹ã‚¿ã‚¤ãƒ—**: ${article_type_ja\
          \ || article_type || 'ä¸æ˜'}\n- **ç·æ–‡å­—æ•°**: ç´„${totalLength}å­—\n- **[è¦ç¢ºèª]ã‚¿ã‚°**:\
          \ ${tag_count || 0}ç®‡æ‰€\n- **æ–‡ä½“ä¿®æ­£**: ${style_fix_count || 0}ç®‡æ‰€\n- **æ–‡ä½“ä¸€è²«æ€§ã‚¹ã‚³ã‚¢**:\
          \ ${((style_score || 0) * 100).toFixed(0)}%\n- **äº‹å®Ÿæ¤œè¨¼ä¿¡é ¼åº¦**: ${((hallucination_confidence\
          \ || 0) * 100).toFixed(0)}%\n\n### \U0001F4A1 æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—\n1. [è¦ç¢ºèª] ã‚¿ã‚°ãŒã‚ã‚‹ç®‡æ‰€ã¯äº‹å®Ÿç¢ºèªã—ã¦ãã ã•ã„\n\
          2. ã‚¿ã‚¤ãƒˆãƒ«ã¯3æ¡ˆã‹ã‚‰é¸æŠã¾ãŸã¯èª¿æ•´ã—ã¦ãã ã•ã„\n3. å¿…è¦ã«å¿œã˜ã¦æ–‡ç« ã‚’å¾®èª¿æ•´ã—ã¦ãã ã•ã„`;\n        \n        //\
          \ æœ€çµ‚å‡ºåŠ›\n        const finalDraft = [\n            titleSection,\n      \
          \      '',\n            leadSection,\n            '',\n            bodySection,\n\
          \            '',\n            closingSection,\n            '',\n       \
          \     metaSection\n        ].join('\\n');\n        \n        return {\n\
          \            final_draft: finalDraft,\n            total_length: totalLength\n\
          \        };\n    } catch (e) {\n        return {\n            final_draft:\
          \ 'ãƒ‰ãƒ©ãƒ•ãƒˆç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + e.message,\n            total_length: 0\n   \
          \     };\n    }\n}\n"
        code_language: javascript
        desc: æœ€çµ‚çš„ãªãƒ‰ãƒ©ãƒ•ãƒˆã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        outputs:
          final_draft:
            children: null
            type: string
          total_length:
            children: null
            type: number
        selected: false
        title: ãƒ‰ãƒ©ãƒ•ãƒˆæ•´å½¢
        type: code
        variables:
        - value_selector:
          - node_title_generator
          - structured_output
          - titles
          variable: titles
        - value_selector:
          - node_tag_inserter
          - corrected_lead
          variable: corrected_lead
        - value_selector:
          - node_tag_inserter
          - corrected_body
          variable: corrected_body
        - value_selector:
          - node_tag_inserter
          - corrected_closing
          variable: corrected_closing
        - value_selector:
          - node_draft_assembler
          - body_length
          variable: body_length
        - value_selector:
          - node_tag_inserter
          - tag_count
          variable: tag_count
        - value_selector:
          - node_tag_inserter
          - style_fix_count
          variable: style_fix_count
        - value_selector:
          - node_article_classifier
          - structured_output
          - article_type
          variable: article_type
        - value_selector:
          - node_article_classifier
          - structured_output
          - article_type_ja
          variable: article_type_ja
        - value_selector:
          - node_style_checker
          - structured_output
          - consistency_score
          variable: style_score
        - value_selector:
          - node_hallucination_detector
          - structured_output
          - confidence
          variable: hallucination_confidence
      height: 80
      id: node_draft_formatter
      position:
        x: 5958
        y: 390
      positionAbsolute:
        x: 5958
        y: 390
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#node_draft_formatter.final_draft#}}'
        desc: æœ€çµ‚ãƒ‰ãƒ©ãƒ•ãƒˆã‚’å‡ºåŠ›
        selected: false
        title: ãƒ‰ãƒ©ãƒ•ãƒˆå‡ºåŠ›
        type: answer
        variables: []
      height: 130
      id: node_answer_output
      position:
        x: 6300
        y: 374
      positionAbsolute:
        x: 6300
        y: 374
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: 75.29402338773048
      y: 159.44604122493791
      zoom: 0.5558344925202533
  rag_pipeline_variables: []
