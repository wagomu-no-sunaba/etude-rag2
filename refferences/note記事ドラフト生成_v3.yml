app:
  description: 'noteè¨˜äº‹ãƒ‰ãƒ©ãƒ•ãƒˆç”Ÿæˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ v3


    ã€v3ã®ç‰¹å¾´ã€‘

    - ã‚«ãƒ†ã‚´ãƒªåˆ¥CONTENT_KB Ã— STYLE_KBåˆ†é›¢æ§‹æˆ

    - STYLE_PROFILEï¼ˆæ–‡ä½“ãƒ«ãƒ¼ãƒ«ï¼‰+ STYLE_EXCERPTSï¼ˆæ–‡ä½“è¦‹æœ¬ï¼‰ã®äºŒå±¤å–å¾—

    - 2æ®µéšç”Ÿæˆï¼ˆã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ â†’ æœ¬æ–‡ï¼‰

    - æ–‡ä½“æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ + è‡ªå‹•ãƒªãƒ©ã‚¤ãƒˆæ©Ÿèƒ½

    - ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³æ¤œçŸ¥ã¨[è¦ç¢ºèª]ã‚¿ã‚°æŒ¿å…¥


    ã€å¯¾å¿œã‚«ãƒ†ã‚´ãƒªã€‘

    - interviewï¼ˆç¤¾å“¡ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼‰

    - eventï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼‰

    - announcementï¼ˆãŠçŸ¥ã‚‰ã›ãƒ»ãƒªãƒªãƒ¼ã‚¹ï¼‰

    - storyï¼ˆã‚«ãƒ«ãƒãƒ£ãƒ¼ãƒ»ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ï¼‰


    ã€å¯¾è±¡ã€‘

    æ ªå¼ä¼šç¤¾ã‚®ã‚°ãƒ¼ æ¡ç”¨åºƒå ±noteè¨˜äº‹

    '
  icon: ğŸ¤–
  icon_background: '#E0F2FE'
  mode: advanced-chat
  name: noteè¨˜äº‹ãƒ‰ãƒ©ãƒ•ãƒˆç”Ÿæˆ_v3
  use_icon_as_answer_icon: true
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.2.7@9031bbf9b37d9f6341a20c78a8bd18d686afd3ff627545496c3557705419d084
    version: null
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/cohere:0.0.8@1456818eb78f25c1a25e91809cecbd78e5523d39868dcb78607e625913b5e4fe
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .TXT
      - .MD
      - .PDF
      - .DOCX
      allowed_file_types:
      - document
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: true
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 5
    opening_statement: 'ã“ã‚“ã«ã¡ã¯ï¼æ ªå¼ä¼šç¤¾ã‚®ã‚°ãƒ¼ã®noteè¨˜äº‹ãƒ‰ãƒ©ãƒ•ãƒˆç”ŸæˆAIï¼ˆv3ï¼‰ã§ã™ã€‚


      ğŸ“ å¯¾å¿œã—ã¦ã„ã‚‹è¨˜äº‹ã‚«ãƒ†ã‚´ãƒªï¼š

      - interviewï¼ˆç¤¾å“¡ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼‰

      - eventï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼‰

      - announcementï¼ˆãŠçŸ¥ã‚‰ã›ãƒ»ãƒªãƒªãƒ¼ã‚¹ï¼‰

      - storyï¼ˆã‚«ãƒ«ãƒãƒ£ãƒ¼ãƒ»ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ï¼‰


      ä»¥ä¸‹ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š

      - è¨˜äº‹ã‚«ãƒ†ã‚´ãƒªï¼ˆä¸Šè¨˜4ç¨®é¡ã‹ã‚‰é¸æŠï¼‰

      - ãƒ†ãƒ¼ãƒãƒ»ä¸»æ—¨

      - èª­è€…ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ

      - è¨˜äº‹ã®ç›®çš„

      - ç®‡æ¡æ›¸ãã®ãƒ¡ãƒ¢ã€ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼å†…å®¹ãªã©

      - å¸Œæœ›æ–‡å­—æ•°ï¼ˆä»»æ„ï¼‰

      '
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
    - 'category: interview ã§å…¥ç¤¾ã‚¨ãƒ³ãƒˆãƒªã‚’æ›¸ããŸã„'
    - 'category: event ã§ç¤¾å†…å‹‰å¼·ä¼šã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ãŸã„'
    - 'category: announcement ã§æ–°ã‚µãƒ¼ãƒ“ã‚¹ãƒªãƒªãƒ¼ã‚¹ã‚’å‘ŠçŸ¥ã—ãŸã„'
    - 'category: story ã§ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯åˆ¶åº¦ã‚’ç´¹ä»‹ã—ãŸã„'
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: llm
      id: start-to-collect-inputs
      source: node_start
      sourceHandle: source
      target: node_collect_inputs
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: collect-inputs-to-category-switch
      source: node_collect_inputs
      sourceHandle: source
      target: node_category_switch
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: category-switch-to-query-interview
      source: node_category_switch
      sourceHandle: interview
      target: node_query_gen_interview
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: category-switch-to-query-event
      source: node_category_switch
      sourceHandle: event
      target: node_query_gen_event
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: category-switch-to-query-announcement
      source: node_category_switch
      sourceHandle: announcement
      target: node_query_gen_announcement
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: category-switch-to-query-story
      source: node_category_switch
      sourceHandle: story
      target: node_query_gen_story
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: knowledge-retrieval
      id: query-interview-to-content-kb
      source: node_query_gen_interview
      sourceHandle: source
      target: node_content_kb_interview
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: knowledge-retrieval
      id: query-event-to-content-kb
      source: node_query_gen_event
      sourceHandle: source
      target: node_content_kb_event
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: knowledge-retrieval
      id: query-announcement-to-content-kb
      source: node_query_gen_announcement
      sourceHandle: source
      target: node_content_kb_announcement
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: knowledge-retrieval
      id: query-story-to-content-kb
      source: node_query_gen_story
      sourceHandle: source
      target: node_content_kb_story
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: knowledge-retrieval
      id: content-interview-to-style-profile
      source: node_content_kb_interview
      sourceHandle: source
      target: node_style_profile_interview
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: knowledge-retrieval
      id: content-event-to-style-profile
      source: node_content_kb_event
      sourceHandle: source
      target: node_style_profile_event
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: knowledge-retrieval
      id: content-announcement-to-style-profile
      source: node_content_kb_announcement
      sourceHandle: source
      target: node_style_profile_announcement
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: knowledge-retrieval
      id: content-story-to-style-profile
      source: node_content_kb_story
      sourceHandle: source
      target: node_style_profile_story
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: knowledge-retrieval
      id: style-profile-interview-to-excerpts
      source: node_style_profile_interview
      sourceHandle: source
      target: node_style_excerpts_interview
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: knowledge-retrieval
      id: style-profile-event-to-excerpts
      source: node_style_profile_event
      sourceHandle: source
      target: node_style_excerpts_event
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: knowledge-retrieval
      id: style-profile-announcement-to-excerpts
      source: node_style_profile_announcement
      sourceHandle: source
      target: node_style_excerpts_announcement
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: knowledge-retrieval
      id: style-profile-story-to-excerpts
      source: node_style_profile_story
      sourceHandle: source
      target: node_style_excerpts_story
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: code
      id: style-excerpts-interview-to-merge
      source: node_style_excerpts_interview
      sourceHandle: source
      target: node_merge_results
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: code
      id: style-excerpts-event-to-merge
      source: node_style_excerpts_event
      sourceHandle: source
      target: node_merge_results
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: code
      id: style-excerpts-announcement-to-merge
      source: node_style_excerpts_announcement
      sourceHandle: source
      target: node_merge_results
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: code
      id: style-excerpts-story-to-merge
      source: node_style_excerpts_story
      sourceHandle: source
      target: node_merge_results
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: llm
      id: merge-to-outline
      source: node_merge_results
      sourceHandle: source
      target: node_generate_outline
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: outline-to-article
      source: node_generate_outline
      sourceHandle: source
      target: node_generate_article
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: article-to-style-check
      source: node_generate_article
      sourceHandle: source
      target: node_style_check
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: style-check-to-rewrite
      source: node_style_check
      sourceHandle: source
      target: node_auto_rewrite
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: rewrite-to-hallucination
      source: node_auto_rewrite
      sourceHandle: source
      target: node_hallucination_detect
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: hallucination-to-tag
      source: node_hallucination_detect
      sourceHandle: source
      target: node_tag_inserter
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: code
      id: tag-to-format
      source: node_tag_inserter
      sourceHandle: source
      target: node_final_format
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: answer
      id: format-to-answer
      source: node_final_format
      sourceHandle: source
      target: node_answer
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰è¨˜äº‹ç´ æã¨è¨­å®šã‚’å—ã‘å–ã‚‹é–‹å§‹ãƒãƒ¼ãƒ‰
        selected: false
        title: ç´ æå…¥åŠ›
        type: start
        variables: []
      height: 117
      id: node_start
      position:
        x: 0
        y: 400
      positionAbsolute:
        x: 0
        y: 400
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‹ã‚‰ã‚«ãƒ†ã‚´ãƒªã€ãƒ†ãƒ¼ãƒã€èª­è€…ã€ç›®çš„ã€å¸Œæœ›æ–‡å­—æ•°ã‚’æŠ½å‡ºã—ã¦æ§‹é€ åŒ–

          '
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-collect-inputs
          role: system
          text: 'ã‚ãªãŸã¯å…¥åŠ›æƒ…å ±ã‚’æ§‹é€ åŒ–ã™ã‚‹ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰æä¾›ã•ã‚ŒãŸè¨˜äº‹ç´ æã‚’åˆ†æã—ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’æŠ½å‡ºãƒ»æ§‹é€ åŒ–ã—ã¦ãã ã•ã„ã€‚


            ## æŠ½å‡ºé …ç›®

            1. category: è¨˜äº‹ã‚«ãƒ†ã‚´ãƒªï¼ˆinterview / event / announcement / storyï¼‰

            2. theme: è¨˜äº‹ã®ãƒ†ãƒ¼ãƒãƒ»ä¸»æ—¨ï¼ˆ1æ–‡ã§è¦ç´„ï¼‰

            3. audience: æƒ³å®šèª­è€…

            4. goal: è¨˜äº‹ã®ç›®çš„

            5. desired_length: å¸Œæœ›æ–‡å­—æ•°ï¼ˆæŒ‡å®šãªã—ã®å ´åˆã¯2000ï¼‰

            6. key_points: è¨˜äº‹ã«å«ã‚ã‚‹ã¹ãé‡è¦ãƒã‚¤ãƒ³ãƒˆ

            7. interview_quotes: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ç™ºè¨€ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰

            8. data_facts: å…·ä½“çš„ãªæ•°å€¤ã‚„ãƒ‡ãƒ¼ã‚¿

            9. keywords: æ¤œç´¢ç”¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆ5-10å€‹ï¼‰


            ## ã‚«ãƒ†ã‚´ãƒªåˆ¤å®šåŸºæº–

            - interview: ç¤¾å“¡ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã€å…¥ç¤¾ã‚¨ãƒ³ãƒˆãƒªã€äººç‰©ãƒ•ã‚©ãƒ¼ã‚«ã‚¹

            - event: å‹‰å¼·ä¼šã€ã‚¤ãƒ™ãƒ³ãƒˆã€ã‚»ãƒŸãƒŠãƒ¼å ±å‘Š

            - announcement: æ–°ã‚µãƒ¼ãƒ“ã‚¹ã€ãƒªãƒªãƒ¼ã‚¹ã€ãŠçŸ¥ã‚‰ã›

            - story: ä¼æ¥­æ–‡åŒ–ã€åˆ¶åº¦ç´¹ä»‹ã€ã‚«ãƒ«ãƒãƒ£ãƒ¼


            ## ãƒ«ãƒ¼ãƒ«

            - å…¥åŠ›ã«ãªã„æƒ…å ±ã¯æ¨æ¸¬ã—ãªã„

            - ã‚«ãƒ†ã‚´ãƒªãŒä¸æ˜ç¢ºãªå ´åˆã¯æœ€ã‚‚è¿‘ã„ã‚‚ã®ã‚’é¸æŠ

            - æ•°å€¤ã‚„å›ºæœ‰åè©ã¯æ­£ç¢ºã«æŠ½å‡º

            '
        - id: user-input-collect
          role: user
          text: '## å…¥åŠ›ç´ æ

            {{#sys.query#}}


            ä¸Šè¨˜ã®ç´ æã‚’æ§‹é€ åŒ–ã—ã¦ãã ã•ã„ã€‚

            '
        selected: false
        structured_output:
          schema:
            $schema: http://json-schema.org/draft-07/schema#
            additionalProperties: false
            properties:
              audience:
                description: æƒ³å®šèª­è€…
                type: string
              category:
                description: è¨˜äº‹ã‚«ãƒ†ã‚´ãƒª
                enum:
                - interview
                - event
                - announcement
                - story
                type: string
              data_facts:
                description: å…·ä½“çš„ãªæ•°å€¤ã‚„ãƒ‡ãƒ¼ã‚¿
                items:
                  type: string
                type: array
              desired_length:
                default: 2000
                description: å¸Œæœ›æ–‡å­—æ•°
                type: number
              goal:
                description: è¨˜äº‹ã®ç›®çš„
                type: string
              interview_quotes:
                description: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ç™ºè¨€
                items:
                  properties:
                    quote:
                      type: string
                    speaker:
                      type: string
                  type: object
                type: array
              key_points:
                description: é‡è¦ãƒã‚¤ãƒ³ãƒˆ
                items:
                  type: string
                type: array
              keywords:
                description: æ¤œç´¢ç”¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
                items:
                  type: string
                type: array
              theme:
                description: è¨˜äº‹ã®ãƒ†ãƒ¼ãƒ
                type: string
            required:
            - category
            - theme
            - audience
            - goal
            - keywords
            type: object
        structured_output_enabled: true
        title: å…¥åŠ›æƒ…å ±åé›†
        type: llm
        vision:
          enabled: false
      height: 148
      id: node_collect_inputs
      position:
        x: 342
        y: 358.924467808821
      positionAbsolute:
        x: 342
        y: 358.924467808821
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: interview
          conditions:
          - comparison_operator: is
            id: condition-interview
            value: interview
            varType: string
            variable_selector:
            - node_collect_inputs
            - structured_output
            - category
          id: interview
          logical_operator: and
        - case_id: event
          conditions:
          - comparison_operator: is
            id: condition-event
            value: event
            varType: string
            variable_selector:
            - node_collect_inputs
            - structured_output
            - category
          id: event
          logical_operator: and
        - case_id: announcement
          conditions:
          - comparison_operator: is
            id: condition-announcement
            value: announcement
            varType: string
            variable_selector:
            - node_collect_inputs
            - structured_output
            - category
          id: announcement
          logical_operator: and
        - case_id: story
          conditions:
          - comparison_operator: is
            id: condition-story
            value: story
            varType: string
            variable_selector:
            - node_collect_inputs
            - structured_output
            - category
          id: story
          logical_operator: and
        desc: ã‚«ãƒ†ã‚´ãƒªã«å¿œã˜ã¦é©åˆ‡ãªãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã¸æŒ¯ã‚Šåˆ†ã‘
        selected: false
        title: ã‚«ãƒ†ã‚´ãƒªåˆ†å²
        type: if-else
      height: 312
      id: node_category_switch
      position:
        x: 684
        y: 300
      positionAbsolute:
        x: 684
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜äº‹ç”¨ã®æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆ
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-query-interview
          role: system
          text: 'ã‚ãªãŸã¯æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’æœ€é©åŒ–ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ä»¥ä¸‹ã®æƒ…å ±ã‹ã‚‰ã€noteè¨˜äº‹ã®å†…å®¹æ¤œç´¢ã«æœ€é©ãªæ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚


            ## å…¥åŠ›æƒ…å ±

            - ãƒ†ãƒ¼ãƒ: {{#node_collect_inputs.structured_output.theme#}}

            - èª­è€…: {{#node_collect_inputs.structured_output.audience#}}

            - ç›®çš„: {{#node_collect_inputs.structured_output.goal#}}

            - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{#node_collect_inputs.structured_output.keywords#}}


            ## ã‚¯ã‚¨ãƒªç”Ÿæˆãƒ«ãƒ¼ãƒ«

            - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ—æŒ™å½¢å¼ã§å‡ºåŠ›

            - å„ã‚¯ã‚¨ãƒªã¯ç°¡æ½”ã«ï¼ˆ1-6å˜èªï¼‰

            - ãƒ†ãƒ¼ãƒã«é–¢é€£ã™ã‚‹ã‚¯ã‚¨ãƒªï¼ˆ2-3å€‹ï¼‰

            - ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜äº‹ã®æ§‹æˆå‚è€ƒç”¨ã‚¯ã‚¨ãƒªï¼ˆ1-2å€‹ï¼‰

            '
        - id: user-query-interview
          role: user
          text: æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              search_query:
                description: æ¤œç´¢ã‚¯ã‚¨ãƒªï¼ˆã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šï¼‰
                type: string
            required:
            - search_query
            type: object
        structured_output_enabled: true
        title: ã‚¯ã‚¨ãƒªç”Ÿæˆï¼ˆã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼‰
        type: llm
        vision:
          enabled: false
      height: 132
      id: node_query_gen_interview
      position:
        x: 1026
        y: 0
      positionAbsolute:
        x: 1026
        y: 0
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆè¨˜äº‹ç”¨ã®æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆ
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-query-event
          role: system
          text: 'ã‚ãªãŸã¯æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’æœ€é©åŒ–ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ä»¥ä¸‹ã®æƒ…å ±ã‹ã‚‰ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆè¨˜äº‹ã®å†…å®¹æ¤œç´¢ã«æœ€é©ãªæ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚


            ## å…¥åŠ›æƒ…å ±

            - ãƒ†ãƒ¼ãƒ: {{#node_collect_inputs.structured_output.theme#}}

            - èª­è€…: {{#node_collect_inputs.structured_output.audience#}}

            - ç›®çš„: {{#node_collect_inputs.structured_output.goal#}}

            - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{#node_collect_inputs.structured_output.keywords#}}


            ## ã‚¯ã‚¨ãƒªç”Ÿæˆãƒ«ãƒ¼ãƒ«

            - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ—æŒ™å½¢å¼ã§å‡ºåŠ›

            - å„ã‚¯ã‚¨ãƒªã¯ç°¡æ½”ã«ï¼ˆ1-6å˜èªï¼‰

            '
        - id: user-query-event
          role: user
          text: æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              search_query:
                description: æ¤œç´¢ã‚¯ã‚¨ãƒªï¼ˆã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šï¼‰
                type: string
            required:
            - search_query
            type: object
        structured_output_enabled: true
        title: ã‚¯ã‚¨ãƒªç”Ÿæˆï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼‰
        type: llm
        vision:
          enabled: false
      height: 132
      id: node_query_gen_event
      position:
        x: 1026
        y: 200
      positionAbsolute:
        x: 1026
        y: 200
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆè¨˜äº‹ç”¨ã®æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆ
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-query-announcement
          role: system
          text: 'ã‚ãªãŸã¯æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’æœ€é©åŒ–ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ä»¥ä¸‹ã®æƒ…å ±ã‹ã‚‰ã€ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆè¨˜äº‹ã®å†…å®¹æ¤œç´¢ã«æœ€é©ãªæ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚


            ## å…¥åŠ›æƒ…å ±

            - ãƒ†ãƒ¼ãƒ: {{#node_collect_inputs.structured_output.theme#}}

            - èª­è€…: {{#node_collect_inputs.structured_output.audience#}}

            - ç›®çš„: {{#node_collect_inputs.structured_output.goal#}}

            - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{#node_collect_inputs.structured_output.keywords#}}


            ## ã‚¯ã‚¨ãƒªç”Ÿæˆãƒ«ãƒ¼ãƒ«

            - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ—æŒ™å½¢å¼ã§å‡ºåŠ›

            - å„ã‚¯ã‚¨ãƒªã¯ç°¡æ½”ã«ï¼ˆ1-6å˜èªï¼‰

            '
        - id: user-query-announcement
          role: user
          text: æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              search_query:
                description: æ¤œç´¢ã‚¯ã‚¨ãƒªï¼ˆã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šï¼‰
                type: string
            required:
            - search_query
            type: object
        structured_output_enabled: true
        title: ã‚¯ã‚¨ãƒªç”Ÿæˆï¼ˆã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆï¼‰
        type: llm
        vision:
          enabled: false
      height: 132
      id: node_query_gen_announcement
      position:
        x: 1026
        y: 400
      positionAbsolute:
        x: 1026
        y: 400
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ã‚¹ãƒˆãƒ¼ãƒªãƒ¼/ã‚«ãƒ«ãƒãƒ£ãƒ¼è¨˜äº‹ç”¨ã®æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆ
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-query-story
          role: system
          text: 'ã‚ãªãŸã¯æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’æœ€é©åŒ–ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ä»¥ä¸‹ã®æƒ…å ±ã‹ã‚‰ã€ã‚«ãƒ«ãƒãƒ£ãƒ¼/ã‚¹ãƒˆãƒ¼ãƒªãƒ¼è¨˜äº‹ã®å†…å®¹æ¤œç´¢ã«æœ€é©ãªæ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚


            ## å…¥åŠ›æƒ…å ±

            - ãƒ†ãƒ¼ãƒ: {{#node_collect_inputs.structured_output.theme#}}

            - èª­è€…: {{#node_collect_inputs.structured_output.audience#}}

            - ç›®çš„: {{#node_collect_inputs.structured_output.goal#}}

            - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{#node_collect_inputs.structured_output.keywords#}}


            ## ã‚¯ã‚¨ãƒªç”Ÿæˆãƒ«ãƒ¼ãƒ«

            - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ—æŒ™å½¢å¼ã§å‡ºåŠ›

            - å„ã‚¯ã‚¨ãƒªã¯ç°¡æ½”ã«ï¼ˆ1-6å˜èªï¼‰

            '
        - id: user-query-story
          role: user
          text: æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
        selected: false
        structured_output:
          schema:
            properties:
              search_query:
                description: æ¤œç´¢ã‚¯ã‚¨ãƒªï¼ˆã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šï¼‰
                type: string
            required:
            - search_query
            type: object
        structured_output_enabled: true
        title: ã‚¯ã‚¨ãƒªç”Ÿæˆï¼ˆã‚«ãƒ«ãƒãƒ£ãƒ¼ï¼‰
        type: llm
        vision:
          enabled: false
      height: 132
      id: node_query_gen_story
      position:
        x: 1026
        y: 600
      positionAbsolute:
        x: 1026
        y: 600
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - MJ76sox5qOIVoWvQkEQW5eMwMFGMpvqO/A/0OUFacUz/lC0Pal/u6QAnqcmgkksm
        desc: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜äº‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„KBï¼ˆKB_interview_allï¼‰
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-multilingual-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.2
          top_k: 15
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_query_gen_interview
        - structured_output
        - search_query
        retrieval_mode: multiple
        selected: false
        title: CONTENT_KBï¼ˆã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼‰
        type: knowledge-retrieval
      height: 134
      id: node_content_kb_interview
      position:
        x: 1368
        y: 0
      positionAbsolute:
        x: 1368
        y: 0
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - 8koU71fMg7GwsyBwW8VT2zZnGk/B+q1OWPD/Kc6gODCKMOMjZWrDMg8IldBABGcr
        desc: ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆè¨˜äº‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„KBï¼ˆKB_event_allï¼‰
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-multilingual-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.2
          top_k: 15
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_query_gen_event
        - structured_output
        - search_query
        retrieval_mode: multiple
        selected: false
        title: CONTENT_KBï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼‰
        type: knowledge-retrieval
      height: 134
      id: node_content_kb_event
      position:
        x: 1368
        y: 200
      positionAbsolute:
        x: 1368
        y: 200
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - T9oOmTCouVy8CThEzkHls5iSYnjKkW5BZ/+rXS8fTROcleRe6epxYyK7S3W0gBEf
        desc: ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆè¨˜äº‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„KBï¼ˆKB_announcement_allï¼‰
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-multilingual-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.2
          top_k: 15
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_query_gen_announcement
        - structured_output
        - search_query
        retrieval_mode: multiple
        selected: false
        title: CONTENT_KBï¼ˆã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆï¼‰
        type: knowledge-retrieval
      height: 134
      id: node_content_kb_announcement
      position:
        x: 1368
        y: 400
      positionAbsolute:
        x: 1368
        y: 400
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - cplMlK4lzAxWZxD5Az986vMJ6WEgnZzPm3VL83K+k3qdse77MR5k7axgMjyFJCpv
        desc: ã‚¹ãƒˆãƒ¼ãƒªãƒ¼è¨˜äº‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„KBï¼ˆKB_story_allï¼‰
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-multilingual-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.2
          top_k: 15
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_query_gen_story
        - structured_output
        - search_query
        retrieval_mode: multiple
        selected: false
        title: CONTENT_KBï¼ˆã‚«ãƒ«ãƒãƒ£ï¼‰
        type: knowledge-retrieval
      height: 134
      id: node_content_kb_story
      position:
        x: 1368
        y: 600
      positionAbsolute:
        x: 1368
        y: 600
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - 8koU71fMg7GwsyBwW8VT2zZnGk/B+q1OWPD/Kc6gODCKMOMjZWrDMg8IldBABGcr
        desc: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜äº‹æ–‡ä½“ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«KBï¼ˆKB_interview_style, type=style_profileï¼‰
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-english-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.1
          top_k: 1
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_collect_inputs
        - structured_output
        - category
        retrieval_mode: multiple
        selected: false
        title: STYLE_PROFILEï¼ˆã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼‰
        type: knowledge-retrieval
      height: 150
      id: node_style_profile_interview
      position:
        x: 1710
        y: 0
      positionAbsolute:
        x: 1710
        y: 0
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - 8koU71fMg7GwsyBwW8VT2zZnGk/B+q1OWPD/Kc6gODCKMOMjZWrDMg8IldBABGcr
        desc: ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆæ–‡ä½“ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«KBï¼ˆKB_event_style, type=style_profileï¼‰
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-english-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.1
          top_k: 1
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_collect_inputs
        - structured_output
        - category
        retrieval_mode: multiple
        selected: true
        title: STYLE_PROFILEï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼‰
        type: knowledge-retrieval
      height: 150
      id: node_style_profile_event
      position:
        x: 1710
        y: 200
      positionAbsolute:
        x: 1710
        y: 200
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - T9oOmTCouVy8CThEzkHls5iSYnjKkW5BZ/+rXS8fTROcleRe6epxYyK7S3W0gBEf
        desc: ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆæ–‡ä½“ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«KBï¼ˆKB_announcement_style, type=style_profileï¼‰
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-english-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.1
          top_k: 1
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_collect_inputs
        - structured_output
        - category
        retrieval_mode: multiple
        selected: false
        title: STYLE_PROFILEï¼ˆã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆï¼‰
        type: knowledge-retrieval
      height: 150
      id: node_style_profile_announcement
      position:
        x: 1710
        y: 400
      positionAbsolute:
        x: 1710
        y: 400
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - cplMlK4lzAxWZxD5Az986vMJ6WEgnZzPm3VL83K+k3qdse77MR5k7axgMjyFJCpv
        desc: ã‚¹ãƒˆãƒ¼ãƒªãƒ¼æ–‡ä½“ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«KBï¼ˆKB_story_style, type=style_profileï¼‰
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-english-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.1
          top_k: 1
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_collect_inputs
        - structured_output
        - category
        retrieval_mode: multiple
        selected: false
        title: STYLE_PROFILEï¼ˆã‚«ãƒ«ãƒãƒ£ãƒ¼ï¼‰
        type: knowledge-retrieval
      height: 134
      id: node_style_profile_story
      position:
        x: 1710
        y: 600
      positionAbsolute:
        x: 1710
        y: 600
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - 8koU71fMg7GwsyBwW8VT2zZnGk/B+q1OWPD/Kc6gODCKMOMjZWrDMg8IldBABGcr
        desc: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜äº‹æ–‡ä½“æŠœç²‹KBï¼ˆKB_interview_style, type=style_excerptï¼‰
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-multilingual-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.1
          top_k: 5
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_collect_inputs
        - structured_output
        - theme
        retrieval_mode: multiple
        selected: false
        title: STYLE_EXCERPTSï¼ˆã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼‰
        type: knowledge-retrieval
      height: 150
      id: node_style_excerpts_interview
      position:
        x: 2052
        y: 0
      positionAbsolute:
        x: 2052
        y: 0
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - 8koU71fMg7GwsyBwW8VT2zZnGk/B+q1OWPD/Kc6gODCKMOMjZWrDMg8IldBABGcr
        desc: ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆæ–‡ä½“æŠœç²‹KBï¼ˆKB_event_style, type=style_excerptï¼‰
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-multilingual-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.1
          top_k: 5
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_collect_inputs
        - structured_output
        - theme
        retrieval_mode: multiple
        selected: false
        title: STYLE_EXCERPTSï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼‰
        type: knowledge-retrieval
      height: 150
      id: node_style_excerpts_event
      position:
        x: 2052
        y: 200
      positionAbsolute:
        x: 2052
        y: 200
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - T9oOmTCouVy8CThEzkHls5iSYnjKkW5BZ/+rXS8fTROcleRe6epxYyK7S3W0gBEf
        desc: ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆæ–‡ä½“æŠœç²‹KBï¼ˆKB_announcement_style, type=style_excerptï¼‰
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-multilingual-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.1
          top_k: 5
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_collect_inputs
        - structured_output
        - theme
        retrieval_mode: multiple
        selected: false
        title: STYLE_EXCERPTSï¼ˆã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆï¼‰
        type: knowledge-retrieval
      height: 150
      id: node_style_excerpts_announcement
      position:
        x: 2052
        y: 400
      positionAbsolute:
        x: 2052
        y: 400
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        dataset_ids:
        - cplMlK4lzAxWZxD5Az986vMJ6WEgnZzPm3VL83K+k3qdse77MR5k7axgMjyFJCpv
        desc: ã‚¹ãƒˆãƒ¼ãƒªãƒ¼æ–‡ä½“æŠœç²‹KBï¼ˆKB_story_style, type=style_excerptï¼‰
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-multilingual-v3.0
            provider: langgenius/cohere/cohere
          score_threshold: 0.1
          top_k: 5
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: langgenius/openai/openai
              vector_weight: 0.7
            weight_type: customized
        query_variable_selector:
        - node_collect_inputs
        - structured_output
        - theme
        retrieval_mode: multiple
        selected: false
        title: STYLE_EXCERPTSï¼ˆã‚«ãƒ«ãƒãƒ£ãƒ¼ï¼‰
        type: knowledge-retrieval
      height: 150
      id: node_style_excerpts_story
      position:
        x: 2052
        y: 600
      positionAbsolute:
        x: 2052
        y: 600
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "function main({ \n    category,\n    content_interview, content_event,\
          \ content_announcement, content_story,\n    style_profile_interview, style_profile_event,\
          \ style_profile_announcement, style_profile_story,\n    style_excerpts_interview,\
          \ style_excerpts_event, style_excerpts_announcement, style_excerpts_story\n\
          }) {\n    // ã‚«ãƒ†ã‚´ãƒªã«å¿œã˜ã¦é©åˆ‡ãªãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠ\n    let content_chunks = '';\n    let style_profile\
          \ = '';\n    let style_excerpts = '';\n    \n    switch(category) {\n  \
          \      case 'interview':\n            content_chunks = content_interview\
          \ || '';\n            style_profile = style_profile_interview || '';\n \
          \           style_excerpts = style_excerpts_interview || '';\n         \
          \   break;\n        case 'event':\n            content_chunks = content_event\
          \ || '';\n            style_profile = style_profile_event || '';\n     \
          \       style_excerpts = style_excerpts_event || '';\n            break;\n\
          \        case 'announcement':\n            content_chunks = content_announcement\
          \ || '';\n            style_profile = style_profile_announcement || '';\n\
          \            style_excerpts = style_excerpts_announcement || '';\n     \
          \       break;\n        case 'story':\n            content_chunks = content_story\
          \ || '';\n            style_profile = style_profile_story || '';\n     \
          \       style_excerpts = style_excerpts_story || '';\n            break;\n\
          \    }\n    \n    return {\n        content_chunks: content_chunks,\n  \
          \      style_profile: style_profile,\n        style_excerpts: style_excerpts\n\
          \    };\n}\n"
        code_language: javascript
        desc: ã‚«ãƒ†ã‚´ãƒªã«å¿œã˜ãŸæ¤œç´¢çµæœã‚’ãƒãƒ¼ã‚¸
        outputs:
          content_chunks:
            children: null
            type: string
          style_excerpts:
            children: null
            type: string
          style_profile:
            children: null
            type: string
        selected: false
        title: çµæœãƒãƒ¼ã‚¸
        type: code
        variables:
        - value_selector:
          - node_collect_inputs
          - structured_output
          - category
          variable: category
        - value_selector:
          - node_content_kb_interview
          - result
          variable: content_interview
        - value_selector:
          - node_content_kb_event
          - result
          variable: content_event
        - value_selector:
          - node_content_kb_announcement
          - result
          variable: content_announcement
        - value_selector:
          - node_content_kb_story
          - result
          variable: content_story
        - value_selector:
          - node_style_profile_interview
          - result
          variable: style_profile_interview
        - value_selector:
          - node_style_profile_event
          - result
          variable: style_profile_event
        - value_selector:
          - node_style_profile_announcement
          - result
          variable: style_profile_announcement
        - value_selector:
          - node_style_profile_story
          - result
          variable: style_profile_story
        - value_selector:
          - node_style_excerpts_interview
          - result
          variable: style_excerpts_interview
        - value_selector:
          - node_style_excerpts_event
          - result
          variable: style_excerpts_event
        - value_selector:
          - node_style_excerpts_announcement
          - result
          variable: style_excerpts_announcement
        - value_selector:
          - node_style_excerpts_story
          - result
          variable: style_excerpts_story
      height: 80
      id: node_merge_results
      position:
        x: 2394
        y: 300
      positionAbsolute:
        x: 2394
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'STYLE_PROFILEã«å®šç¾©ã•ã‚ŒãŸæ–‡ä½“ã«å¾“ã„ã€CONTENT_CHUNKSã®ã¿ã‚’å‚ç…§ã—ã¦H2/H3ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚’ç”Ÿæˆ

          '
        model:
          completion_params:
            temperature: 0.5
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-outline-system
          role: system
          text: 'ã‚ãªãŸã¯å¼Šç¤¾ãƒŠãƒ¼ãƒãƒ£ãƒªãƒ³ã‚°è¨˜äº‹ã®ç·¨é›†è€…ã§ã™ã€‚

            STYLE_PROFILE ã«å®šç¾©ã•ã‚ŒãŸæ–‡ä½“ã«å³å¯†ã«å¾“ã£ã¦ãã ã•ã„ã€‚

            å†…å®¹ã¯ CONTENT_CHUNKS ã®ã¿ã‚’å‚ç…§ã—ã€å¤–éƒ¨çŸ¥è­˜ã‚’ä½¿ã‚ãªã„ã“ã¨ã€‚


            ## STYLE_PROFILEï¼ˆæ–‡ä½“ãƒ«ãƒ¼ãƒ«ï¼‰

            {{#node_merge_results.style_profile#}}


            ## STYLE_EXCERPTSï¼ˆæ–‡ä½“è¦‹æœ¬ï¼‰

            {{#node_merge_results.style_excerpts#}}


            ## CONTENT_CHUNKSï¼ˆå‚ç…§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼‰

            {{#node_merge_results.content_chunks#}}

            '
        - id: prompt-outline-user
          role: user
          text: 'ä»¥ä¸‹ã®æ¡ä»¶ã§ H2/H3 ã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚


            - ã‚«ãƒ†ã‚´ãƒª: {{#node_collect_inputs.structured_output.category#}}

            - ãƒ†ãƒ¼ãƒ: {{#node_collect_inputs.structured_output.theme#}}

            - èª­è€…: {{#node_collect_inputs.structured_output.audience#}}

            - ç›®çš„: {{#node_collect_inputs.structured_output.goal#}}


            æœ¬æ–‡ã¯ã¾ã æ›¸ã‹ãªã„ã§ãã ã•ã„ã€‚H2/H3ã®è¦‹å‡ºã—æ§‹æˆã¨å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æ¦‚è¦ã®ã¿å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

            '
        selected: false
        structured_output:
          schema:
            properties:
              headings:
                description: ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³è¦‹å‡ºã—
                items:
                  properties:
                    content_summary:
                      description: ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§æ›¸ãå†…å®¹ã®æ¦‚è¦
                      type: string
                    key_sources:
                      description: ä½¿ç”¨ã™ã‚‹CONTENT_CHUNKSã‹ã‚‰ã®æƒ…å ±
                      items:
                        type: string
                      type: array
                    level:
                      description: è¦‹å‡ºã—ãƒ¬ãƒ™ãƒ«ï¼ˆH2ã¾ãŸã¯H3ï¼‰
                      enum:
                      - H2
                      - H3
                      type: string
                    target_length:
                      description: ç›®æ¨™æ–‡å­—æ•°
                      type: number
                    title:
                      description: è¦‹å‡ºã—ãƒ†ã‚­ã‚¹ãƒˆ
                      type: string
                  type: object
                type: array
              total_target_length:
                description: æœ¬æ–‡å…¨ä½“ã®ç›®æ¨™æ–‡å­—æ•°
                type: number
            required:
            - headings
            - total_target_length
            type: object
        structured_output_enabled: true
        title: ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ç”Ÿæˆ
        type: llm
        vision:
          enabled: false
      height: 148
      id: node_generate_outline
      position:
        x: 2736
        y: 300
      positionAbsolute:
        x: 2736
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'OUTLINE_TEXT ã‚’ç¶­æŒã—ãŸã¾ã¾ã€STYLE_PROFILE ã«å¿ å®Ÿã«æœ¬æ–‡ã‚’ç”Ÿæˆ

          CONTENT_CHUNKS ã«è¨˜è¼‰ã®ãªã„äº‹å®Ÿã‚’å‹æ‰‹ã«ä½œã‚‰ãªã„

          '
        model:
          completion_params:
            temperature: 0.6
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-article-system
          role: system
          text: 'ã‚ãªãŸã¯å¼Šç¤¾ã®ãƒŠãƒ¼ãƒãƒ£ãƒªãƒ³ã‚°è¨˜äº‹ç·¨é›†è€…ã§ã™ã€‚

            STYLE_PROFILE ã‚’çµ¶å¯¾ã«éµå®ˆã—ã€æ–‡ä½“ã‚’æ¨¡å€£ã—ã¦ãã ã•ã„ã€‚

            CONTENT_CHUNKS ã«è¨˜è¼‰ã®ãªã„äº‹å®Ÿã‚’å‹æ‰‹ã«ä½œã‚‰ãªã„ã“ã¨ã€‚


            ## STYLE_PROFILEï¼ˆæ–‡ä½“ãƒ«ãƒ¼ãƒ«ï¼‰

            {{#node_merge_results.style_profile#}}


            ## CONTENT_CHUNKSï¼ˆå‚ç…§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼‰

            {{#node_merge_results.content_chunks#}}


            ## OUTLINE_TEXTï¼ˆã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ï¼‰

            {{#node_generate_outline.structured_output.headings#}}

            '
        - id: prompt-article-user
          role: user
          text: 'OUTLINE_TEXT ã‚’ç¶­æŒã—ãŸã¾ã¾ã€æœ¬æ–‡ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚


            ## åˆ¶ç´„

            - æ–‡ä½“: STYLE_PROFILE ã«å¿ å®Ÿ

            - é•·ã•: {{#node_collect_inputs.structured_output.desired_length#}} æ–‡å­—ç¨‹åº¦

            - éå‰°ãªç…½ã‚Šç¦æ­¢ã€ä¸å¯§ã§è¦ªã—ã¿ã‚„ã™ã„èª¿å­

            - CONTENT_CHUNKS ã®å†…å®¹ã®ã¿ã‚’åˆ©ç”¨ã™ã‚‹

            - å¤–éƒ¨çŸ¥è­˜ã‚’ä½¿ã‚ãªã„


            ## å‡ºåŠ›å½¢å¼

            - ã‚¿ã‚¤ãƒˆãƒ«æ¡ˆï¼ˆ3ã¤ï¼‰

            - ãƒªãƒ¼ãƒ‰æ–‡ï¼ˆ100-150å­—ï¼‰

            - æœ¬æ–‡ï¼ˆè¦‹å‡ºã—ã‚’å«ã‚€ï¼‰

            - ç· ã‚ã®æ–‡ç« 

            '
        selected: false
        title: æœ¬æ–‡ç”Ÿæˆ
        type: llm
        vision:
          enabled: false
      height: 164
      id: node_generate_article
      position:
        x: 3078
        y: 300
      positionAbsolute:
        x: 3078
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'STYLE_PROFILEã¨ã®ä¸€è‡´åº¦ã‚’åˆ¤å®šã—ã€ã‚ºãƒ¬ãŒã‚ã‚‹éƒ¨åˆ†ã‚’æŒ‡æ‘˜ã—ã¦ä¿®æ­£æ¡ˆã‚’æç¤º

          '
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-style-check-system
          role: system
          text: 'ä»¥ä¸‹ã® STYLE_PROFILE ã¨ã®ä¸€è‡´åº¦ã‚’åˆ¤å®šã—ã€

            ã©ã®éƒ¨åˆ†ã«ã‚ºãƒ¬ãŒã‚ã‚‹ã‹æŒ‡æ‘˜ã—ã€å¿…è¦ãªä¿®æ­£æ–‡ã‚’æç¤ºã—ã¦ãã ã•ã„ã€‚


            ## STYLE_PROFILEï¼ˆæ–‡ä½“ãƒ«ãƒ¼ãƒ«ï¼‰

            {{#node_merge_results.style_profile#}}

            '
        - id: prompt-style-check-user
          role: user
          text: 'ä»¥ä¸‹ã®æ–‡ç« ã‚’ STYLE_PROFILE ã«å®Œå…¨é©åˆã•ã›ã‚‹ãŸã‚ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ä¿®æ­£æ¡ˆã‚’ç¤ºã—ã¦ãã ã•ã„ã€‚


            {{#node_generate_article.text#}}

            '
        selected: false
        structured_output:
          schema:
            properties:
              consistency_score:
                description: æ–‡ä½“ä¸€è²«æ€§ã‚¹ã‚³ã‚¢ï¼ˆ0-1ï¼‰
                maximum: 1
                minimum: 0
                type: number
              corrected_sections:
                description: ä¿®æ­£ãŒå¿…è¦ãªç®‡æ‰€ã¨ä¿®æ­£æ¡ˆ
                items:
                  properties:
                    corrected:
                      description: ä¿®æ­£å¾Œ
                      type: string
                    original:
                      description: ä¿®æ­£å‰
                      type: string
                    reason:
                      description: ä¿®æ­£ç†ç”±
                      type: string
                  type: object
                type: array
              issues:
                description: æ–‡ä½“ä¸Šã®å•é¡Œç‚¹
                items:
                  properties:
                    description:
                      type: string
                    location:
                      type: string
                    severity:
                      enum:
                      - high
                      - medium
                      - low
                      type: string
                  type: object
                type: array
            required:
            - consistency_score
            - issues
            type: object
        structured_output_enabled: true
        title: æ–‡ä½“æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
        type: llm
        vision:
          enabled: false
      height: 148
      id: node_style_check
      position:
        x: 3420
        y: 300
      positionAbsolute:
        x: 3420
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'STYLE_PROFILE ã‚’æº€ãŸã™ã‚ˆã†ã«æœ¬æ–‡ã‚’å®Œå…¨ãƒªãƒ©ã‚¤ãƒˆ

          '
        model:
          completion_params:
            temperature: 0.5
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-rewrite-system
          role: system
          text: 'ã‚ãªãŸã¯ã‚¹ã‚¿ã‚¤ãƒ«ç·¨é›†è€…ã§ã™ã€‚

            STYLE_PROFILE ã‚’æº€ãŸã™ã‚ˆã†ã«æœ¬æ–‡ã‚’å®Œå…¨ãƒªãƒ©ã‚¤ãƒˆã—ã¦ãã ã•ã„ã€‚


            ## STYLE_PROFILEï¼ˆæ–‡ä½“ãƒ«ãƒ¼ãƒ«ï¼‰

            {{#node_merge_results.style_profile#}}


            ## æ–‡ä½“ãƒã‚§ãƒƒã‚¯çµæœ

            ä¸€è²«æ€§ã‚¹ã‚³ã‚¢: {{#node_style_check.structured_output.consistency_score#}}

            å•é¡Œç‚¹: {{#node_style_check.structured_output.issues#}}

            ä¿®æ­£æ¡ˆ: {{#node_style_check.structured_output.corrected_sections#}}

            '
        - id: prompt-rewrite-user
          role: user
          text: 'ä»¥ä¸‹ã®è¨˜äº‹ã‚’ STYLE_PROFILE ã«ä¸€è‡´ã™ã‚‹ã‚ˆã†æ•´ãˆã¦ãã ã•ã„ã€‚

            æ–‡ä½“ãƒã‚§ãƒƒã‚¯çµæœã®ä¿®æ­£æ¡ˆã‚’åæ˜ ã—ã¦ãã ã•ã„ã€‚


            {{#node_generate_article.text#}}

            '
        selected: false
        title: è‡ªå‹•ãƒªãƒ©ã‚¤ãƒˆ
        type: llm
        vision:
          enabled: false
      height: 132
      id: node_auto_rewrite
      position:
        x: 3762
        y: 300
      positionAbsolute:
        x: 3762
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: CONTENT_CHUNKSã«ãªã„äº‹å®Ÿã‚’æ¤œå‡ºã—ã€[è¦ç¢ºèª]ã‚¿ã‚°ã®æŒ¿å…¥å€™è£œã‚’ç‰¹å®š
        model:
          completion_params:
            temperature: 0.1
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: prompt-hallucination-system
          role: system
          text: 'ã‚ãªãŸã¯äº‹å®Ÿæ¤œè¨¼ã®å°‚é–€å®¶ã§ã™ã€‚


            ## ã‚¿ã‚¹ã‚¯

            ä»¥ä¸‹ã®è¨˜äº‹ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ CONTENT_CHUNKS ã¨ç…§åˆã—ã€

            CONTENT_CHUNKS ã«è¨˜è¼‰ã®ãªã„äº‹å®Ÿã‚„ä¸»å¼µã‚’ç‰¹å®šã—ã¦ãã ã•ã„ã€‚


            ## CONTENT_CHUNKSï¼ˆå‚ç…§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼‰

            {{#node_merge_results.content_chunks#}}


            ## ãƒã‚§ãƒƒã‚¯å¯¾è±¡

            - å…·ä½“çš„ãªæ•°å€¤ã€æ—¥ä»˜ã€å›ºæœ‰åè©

            - äº‹å®Ÿã®ä¸»å¼µï¼ˆã€‡ã€‡ã—ãŸã€ã€‡ã€‡ã§ã‚ã‚‹ï¼‰

            - å¼•ç”¨ã‚„ã‚³ãƒ¡ãƒ³ãƒˆ


            ## å‡ºåŠ›ãƒ«ãƒ¼ãƒ«

            - æ¤œè¨¼ä¸èƒ½ãªä¸»å¼µã«ã¯[è¦ç¢ºèª]ã‚¿ã‚°ã‚’æ¨å¥¨

            - æ˜ã‚‰ã‹ã«CONTENT_CHUNKSã‹ã‚‰å¾—ãŸæƒ…å ±ã¯é™¤å¤–

            '
        - id: prompt-hallucination-user
          role: user
          text: 'ä»¥ä¸‹ã®è¨˜äº‹ãƒ‰ãƒ©ãƒ•ãƒˆã‚’æ¤œè¨¼ã—ã¦ãã ã•ã„ã€‚


            {{#node_auto_rewrite.text#}}

            '
        selected: false
        structured_output:
          schema:
            properties:
              confidence:
                description: å…¨ä½“çš„ãªäº‹å®Ÿæ¤œè¨¼ä¿¡é ¼åº¦ï¼ˆ0-1ï¼‰
                maximum: 1
                minimum: 0
                type: number
              unverified_claims:
                description: æ¤œè¨¼ä¸èƒ½ãªä¸»å¼µ
                items:
                  properties:
                    claim:
                      description: è©²å½“ã™ã‚‹ä¸»å¼µ
                      type: string
                    reason:
                      description: æ¤œè¨¼ä¸èƒ½ãªç†ç”±
                      type: string
                    suggested_tag:
                      description: æ¨å¥¨ã•ã‚Œã‚‹[è¦ç¢ºèª]ã‚¿ã‚°
                      type: string
                  type: object
                type: array
            required:
            - unverified_claims
            - confidence
            type: object
        structured_output_enabled: true
        title: ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³æ¤œçŸ¥
        type: llm
        vision:
          enabled: false
      height: 132
      id: node_hallucination_detect
      position:
        x: 4104
        y: 300
      positionAbsolute:
        x: 4104
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "function main({ article_text, unverified_claims }) {\n    try {\n \
          \       let result = article_text || '';\n        let tagCount = 0;\n  \
          \      \n        if (Array.isArray(unverified_claims)) {\n            for\
          \ (const item of unverified_claims) {\n                if (item.claim &&\
          \ item.suggested_tag) {\n                    const tag = `[è¦ç¢ºèª: ${item.suggested_tag}]`;\n\
          \                    if (result.includes(item.claim)) {\n              \
          \          result = result.replace(\n                            item.claim,\n\
          \                            `${item.claim} ${tag}`\n                  \
          \      );\n                        tagCount++;\n                    }\n\
          \                }\n            }\n        }\n        \n        return {\n\
          \            tagged_article: result,\n            tag_count: tagCount\n\
          \        };\n    } catch (e) {\n        return {\n            tagged_article:\
          \ article_text || '',\n            tag_count: 0\n        };\n    }\n}\n"
        code_language: javascript
        desc: æ¤œè¨¼ä¸èƒ½ãªä¸»å¼µã«[è¦ç¢ºèª]ã‚¿ã‚°ã‚’æŒ¿å…¥
        outputs:
          tag_count:
            children: null
            type: number
          tagged_article:
            children: null
            type: string
        selected: false
        title: ã‚¿ã‚°æŒ¿å…¥
        type: code
        variables:
        - value_selector:
          - node_auto_rewrite
          - text
          variable: article_text
        - value_selector:
          - node_hallucination_detect
          - structured_output
          - unverified_claims
          variable: unverified_claims
      height: 80
      id: node_tag_inserter
      position:
        x: 4446
        y: 330
      positionAbsolute:
        x: 4446
        y: 330
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "function main({ \n    tagged_article, \n    tag_count,\n    category,\n\
          \    theme,\n    desired_length,\n    style_score,\n    hallucination_confidence\n\
          }) {\n    try {\n        const categoryJa = {\n            'interview':\
          \ 'ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼',\n            'event': 'ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆ',\n            'announcement':\
          \ 'ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆ',\n            'story': 'ã‚«ãƒ«ãƒãƒ£ãƒ¼/ã‚¹ãƒˆãƒ¼ãƒªãƒ¼'\n        };\n        \n\
          \        const articleLength = (tagged_article || '').replace(/\\s/g, '').length;\n\
          \        \n        const metaSection = `---\n\n### \U0001F4CA ãƒ¡ã‚¿æƒ…å ±\n\n-\
          \ **è¨˜äº‹ã‚«ãƒ†ã‚´ãƒª**: ${categoryJa[category] || category}\n- **ãƒ†ãƒ¼ãƒ**: ${theme ||\
          \ 'ä¸æ˜'}\n- **ç·æ–‡å­—æ•°**: ç´„${articleLength}å­—ï¼ˆç›®æ¨™: ${desired_length || 2000}å­—ï¼‰\n\
          - **[è¦ç¢ºèª]ã‚¿ã‚°**: ${tag_count || 0}ç®‡æ‰€\n- **æ–‡ä½“ä¸€è²«æ€§ã‚¹ã‚³ã‚¢**: ${((style_score || 0)\
          \ * 100).toFixed(0)}%\n- **äº‹å®Ÿæ¤œè¨¼ä¿¡é ¼åº¦**: ${((hallucination_confidence || 0)\
          \ * 100).toFixed(0)}%\n\n### \U0001F4A1 æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—\n\n1. [è¦ç¢ºèª] ã‚¿ã‚°ãŒã‚ã‚‹ç®‡æ‰€ã¯äº‹å®Ÿç¢ºèªã—ã¦ãã ã•ã„\n\
          2. ã‚¿ã‚¤ãƒˆãƒ«ã¯3æ¡ˆã‹ã‚‰é¸æŠã¾ãŸã¯èª¿æ•´ã—ã¦ãã ã•ã„\n3. å¿…è¦ã«å¿œã˜ã¦æ–‡ç« ã‚’å¾®èª¿æ•´ã—ã¦ãã ã•ã„`;\n        \n        const\
          \ finalOutput = `${tagged_article || ''}\n\n${metaSection}`;\n        \n\
          \        return {\n            final_output: finalOutput,\n            total_length:\
          \ articleLength\n        };\n    } catch (e) {\n        return {\n     \
          \       final_output: 'ãƒ‰ãƒ©ãƒ•ãƒˆç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + e.message,\n            total_length:\
          \ 0\n        };\n    }\n}\n"
        code_language: javascript
        desc: æœ€çµ‚çš„ãªãƒ‰ãƒ©ãƒ•ãƒˆã‚’æ•´å½¢ã—ã¦å‡ºåŠ›
        outputs:
          final_output:
            children: null
            type: string
          total_length:
            children: null
            type: number
        selected: false
        title: æœ€çµ‚æ•´å½¢
        type: code
        variables:
        - value_selector:
          - node_tag_inserter
          - tagged_article
          variable: tagged_article
        - value_selector:
          - node_tag_inserter
          - tag_count
          variable: tag_count
        - value_selector:
          - node_collect_inputs
          - structured_output
          - category
          variable: category
        - value_selector:
          - node_collect_inputs
          - structured_output
          - theme
          variable: theme
        - value_selector:
          - node_collect_inputs
          - structured_output
          - desired_length
          variable: desired_length
        - value_selector:
          - node_style_check
          - structured_output
          - consistency_score
          variable: style_score
        - value_selector:
          - node_hallucination_detect
          - structured_output
          - confidence
          variable: hallucination_confidence
      height: 80
      id: node_final_format
      position:
        x: 4788
        y: 330
      positionAbsolute:
        x: 4788
        y: 330
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#node_final_format.final_output#}}'
        desc: æœ€çµ‚ãƒ‰ãƒ©ãƒ•ãƒˆã‚’å‡ºåŠ›
        selected: false
        title: ãƒ‰ãƒ©ãƒ•ãƒˆå‡ºåŠ›
        type: answer
        variables: []
      height: 131
      id: node_answer
      position:
        x: 5130
        y: 314
      positionAbsolute:
        x: 5130
        y: 314
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: 14.390790915109847
      y: 83.80644216676353
      zoom: 0.8798803294690914
  rag_pipeline_variables: []
