```
  ネットワーク構成図（ASCII Art）

  ┌─────────────────────────────────────────────────────────────────────────────────────┐
  │                              etude-rag2 Network Architecture                        │
  └─────────────────────────────────────────────────────────────────────────────────────┘

      ┌──────────────┐
      │   Browser    │
      │   (User)     │
      └──────┬───────┘
             │
             │ HTTPS
             ▼
  ┌─────────────────────────────────────────────────────────────────────────────────────┐
  │                              Google Cloud Platform                                  │
  │  ┌───────────────────────────────────────────────────────────────────────────────┐  │
  │  │                            Cloud Run (Public)                                 │  │
  │  │  ┌─────────────────────┐       ┌─────────────────────┐                        │  │
  │  │  │ etude-rag2-api      │       │ etude-rag2-streamlit│                        │  │
  │  │  │ (FastAPI)           │◄──────│ (Streamlit UI)      │                        │  │
  │  │  │ Port: 8080          │ HTTP  │ Port: 8501          │                        │  │
  │  │  │ CPU:2 / Mem:4Gi     │       │ CPU:2 / Mem:4Gi     │                        │  │
  │  │  └─────────┬───────────┘       └─────────────────────┘                        │  │
  │  └────────────┼──────────────────────────────────────────────────────────────────┘  │
  │               │                                                                     │
  │  ┌────────────┼──────────────────────────────────────────────────────────────────┐  │
  │  │            │          VPC Access Connector (10.8.0.0/28)                      │  │
  │  │            ▼                                                                  │  │
  │  │  ┌─────────────────────────────────────────────────────────────────────────┐  │  │
  │  │  │                  VPC: etude-rag2-vpc (10.0.0.0/24)                      │  │  │
  │  │  │                                                                         │  │  │
  │  │  │   ┌─────────────────────────────────────────────────────────────────┐   │  │  │
  │  │  │   │                   VPC Peering (Private Service Access)          │   │  │  │
  │  │  │   │                                                                 │   │  │  │
  │  │  │   │   ┌───────────────────────────────────────────────────────┐     │   │  │  │
  │  │  │   │   │            Cloud SQL (Private IP Only)                │     │   │  │  │
  │  │  │   │   │   ┌─────────────────────────────────────────────┐     │     │   │  │  │
  │  │  │   │   │   │      PostgreSQL 16 (etude-rag2-db)          │     │     │   │  │  │
  │  │  │   │   │   │   • pgvector (768-dim embeddings)           │     │     │   │  │  │
  │  │  │   │   │   │   • pg_trgm (trigram full-text search)      │     │     │   │  │  │
  │  │  │   │   │   │   • Database: etude-rag2                    │     │     │   │  │  │
  │  │  │   │   │   └─────────────────────────────────────────────┘     │     │   │  │  │
  │  │  │   │   └───────────────────────────────────────────────────────┘     │   │  │  │
  │  │  │   └─────────────────────────────────────────────────────────────────┘   │  │  │
  │  │  └─────────────────────────────────────────────────────────────────────────┘  │  │
  │  └───────────────────────────────────────────────────────────────────────────────┘  │
  │                                                                                     │
  │  ┌───────────────────────────────────────────────────────────────────────────────┐  │
  │  │                        Cloud Run Job (On-Demand)                              │  │
  │  │  ┌─────────────────────┐                                                      │  │
  │  │  │ etude-rag2-ingester │──────► VPC Connector ──────► Cloud SQL               │  │
  │  │  │ (Document Ingester) │                                                      │  │
  │  │  │ CPU:2 / Mem:2Gi     │──────► Vertex AI (text-embedding-004)                │  │
  │  │  └─────────┬───────────┘                                                      │  │
  │  │            │                                                                  │  │
  │  │            ▼                                                                  │  │
  │  │  ┌─────────────────────┐                                                      │  │
  │  │  │   Google Drive      │                                                      │  │
  │  │  │   (Source Docs)     │                                                      │  │
  │  │  └─────────────────────┘                                                      │  │
  │  └───────────────────────────────────────────────────────────────────────────────┘  │
  │                                                                                     │
  │  ┌───────────────────────────────────────────────────────────────────────────────┐  │
  │  │                         GCP Managed Services                                  │  │
  │  │                                                                               │  │
  │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │  │
  │  │  │   Vertex AI     │  │ Secret Manager  │  │Artifact Registry│                │  │
  │  │  │                 │  │                 │  │                 │                │  │
  │  │  │• Embedding:     │  │• db-password    │  │• api-server     │                │  │
  │  │  │  text-embedding │  │• drive-folder-id│  │• streamlit-ui   │                │  │
  │  │  │  -004 (768d)    │  │• my-email       │  │• ingester       │                │  │
  │  │  │• LLM: gemini-   │  │• app-config     │  │• base images    │                │  │
  │  │  │  2.0-flash      │  │                 │  │                 │                │  │
  │  │  └─────────────────┘  └─────────────────┘  └─────────────────┘                │  │
  │  │                                                                               │  │
  │  │  ┌─────────────────┐  ┌─────────────────┐                                     │  │
  │  │  │   Cloud Build   │  │    IAM          │                                     │  │
  │  │  │                 │  │                 │                                     │  │
  │  │  │• Kaniko builds  │  │• Service Account│                                     │  │
  │  │  │• E2_HIGHCPU_8   │  │• Workload       │                                     │  │
  │  │  │• Cache: 168h    │  │  Identity       │                                     │  │
  │  │  └─────────────────┘  └─────────────────┘                                     │  │
  │  └───────────────────────────────────────────────────────────────────────────────┘  │
  └─────────────────────────────────────────────────────────────────────────────────────┘


  ┌─────────────────────────────────────────────────────────────────────────────────────┐
  │                              Data Flow Summary                                      │
  ├─────────────────────────────────────────────────────────────────────────────────────┤
  │                                                                                     │
  │  [Document Ingestion]                                                               │
  │  Google Drive ──► Ingester ──► Vertex AI (Embed) ──► Cloud SQL (pgvector)           │
  │                                                                                     │
  │  [Query Processing]                                                                 │
  │  User Query ──► API ──► Hybrid Search (Vector + Trigram) ──► BGE Reranker           │
  │                    └──► Vertex AI (LLM) ──► Article Draft ──► User                  │
  │                                                                                     │
  └─────────────────────────────────────────────────────────────────────────────────────┘
```
