# =============================================================================
# Environment Configuration
# =============================================================================
#
# Configuration Priority:
# 1. Environment variables (highest priority)
# 2. Google Cloud Secret Manager (for secrets)
# 3. This .env file (local development fallback)
#
# For local development, you can either:
# - Run ./scripts/sync-env-from-secrets.sh to generate .env from Secret Manager
# - Or manually configure this file
#
# In production (Cloud Run), secrets are injected directly from Secret Manager.
# =============================================================================

# Google Cloud (REQUIRED)
GOOGLE_PROJECT_ID=your-project-id
GOOGLE_LOCATION=us-central1
ENVIRONMENT=dev

# Service account (only for local development)
SERVICE_ACCOUNT_FILE=/path/to/service-account.json

# =============================================================================
# Database
# =============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=rag_db
DB_USER=postgres
# DB_PASSWORD is loaded from Secret Manager: etude-rag2-db-password-{env}
DB_PASSWORD=

# =============================================================================
# Google Drive
# =============================================================================
# TARGET_FOLDER_ID is loaded from Secret Manager: etude-rag2-drive-folder-id-{env}
TARGET_FOLDER_ID=

# Email for ACL filtering (loaded from Secret Manager: etude-rag2-my-email-{env})
MY_EMAIL=

# =============================================================================
# OAuth (Google)
# =============================================================================
# OAuth Client ID (loaded from Secret Manager: etude-rag2-oauth-client-id-{env})
GOOGLE_OAUTH_CLIENT_ID=
# OAuth Client Secret (loaded from Secret Manager: etude-rag2-oauth-client-secret-{env})
GOOGLE_OAUTH_CLIENT_SECRET=
# Session secret key for cookie signing (loaded from Secret Manager: etude-rag2-session-secret-key-{env})
SESSION_SECRET_KEY=

# =============================================================================
# Access Control
# =============================================================================
# Comma-separated list of allowed email addresses
# (loaded from Secret Manager: etude-rag2-allowed-emails-{env})
ALLOWED_EMAILS=

# =============================================================================
# Vertex AI (defaults, can be overridden)
# =============================================================================
EMBEDDING_MODEL=text-embedding-004
LLM_MODEL=gemini-2.0-flash
LLM_MODEL_LITE=gemini-2.0-flash-lite
LLM_TEMPERATURE=0.3

# =============================================================================
# Hybrid Search Parameters (defaults)
# =============================================================================
HYBRID_SEARCH_K=20
RRF_K=50
FINAL_K=10

# =============================================================================
# Reranker (defaults)
# =============================================================================
RERANKER_MODEL=BAAI/bge-reranker-v2-m3
RERANKER_TOP_K=5
USE_FP16=true

# =============================================================================
# Feature Flags (Dify v3 compatible features)
# =============================================================================
USE_LITE_MODEL=true
USE_QUERY_GENERATOR=true
USE_STYLE_PROFILE_KB=true
USE_AUTO_REWRITE=true

# =============================================================================
# Chunking (defaults)
# =============================================================================
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
